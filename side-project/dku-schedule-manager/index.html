<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.46">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <meta name="google-site-verification" content="sHfBWIoCUOYFXJ3b0ulN8jp9jpD8SEW5Wpxvlk-UABA"><link rel="apple-touch-icon" sizes="180x180" href="/TIL/assets/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/TIL/assets/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/TIL/assets/favicons/favicon-16x16.png"><link rel="manifest" href="/TIL/manifest.webmanifest"><link rel="mask-icon" href="/TIL/assets/favicons/safari-pinned-tab.svg" color="#3a0839"><link rel="shortcut icon" href="/TIL/assets/favicons/favicon.ico"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Serif+KR&display=swap"><meta name="msapplication-TileColor" content="#3a0839"><meta name="msapplication-config" content="/TIL/browserconfig.xml"><meta name="theme-color" content="#ffffff"><title>단국대학교 강의 시간표를 제공하는 서비스를 만들자 | 개발자 황준일</title><meta name="description" content="단국대학교 재학생들을 타겟팅하는 간단한 사이드 프로젝트를 진행했다. 이에 대한 내용을 정리하는 글이다.">
    <link rel="modulepreload" href="/TIL/assets/app.432c6c8a.js"><link rel="modulepreload" href="/TIL/assets/index.html.8de223f9.js"><link rel="modulepreload" href="/TIL/assets/index.html.93c1ef0a.js"><link rel="prefetch" href="/TIL/assets/index.html.8acc40a0.js"><link rel="prefetch" href="/TIL/assets/index.html.662c0bb2.js"><link rel="prefetch" href="/TIL/assets/index.html.963f27da.js"><link rel="prefetch" href="/TIL/assets/index.html.0cdccbfb.js"><link rel="prefetch" href="/TIL/assets/index.html.a5745882.js"><link rel="prefetch" href="/TIL/assets/index.html.0673054c.js"><link rel="prefetch" href="/TIL/assets/index.html.c4c06734.js"><link rel="prefetch" href="/TIL/assets/index.html.a964f88c.js"><link rel="prefetch" href="/TIL/assets/index.html.9e129226.js"><link rel="prefetch" href="/TIL/assets/index.html.8e79bff0.js"><link rel="prefetch" href="/TIL/assets/index.html.208a6b79.js"><link rel="prefetch" href="/TIL/assets/index.html.9f2b9d0c.js"><link rel="prefetch" href="/TIL/assets/index.html.170c9415.js"><link rel="prefetch" href="/TIL/assets/index.html.2b5c251b.js"><link rel="prefetch" href="/TIL/assets/index.html.7de8a758.js"><link rel="prefetch" href="/TIL/assets/index.html.866d8302.js"><link rel="prefetch" href="/TIL/assets/index.html.7517cbbe.js"><link rel="prefetch" href="/TIL/assets/index.html.9934b041.js"><link rel="prefetch" href="/TIL/assets/index.html.4b01a106.js"><link rel="prefetch" href="/TIL/assets/index.html.4742a894.js"><link rel="prefetch" href="/TIL/assets/index.html.bb303aea.js"><link rel="prefetch" href="/TIL/assets/index.html.e6c515da.js"><link rel="prefetch" href="/TIL/assets/index.html.8f5e907f.js"><link rel="prefetch" href="/TIL/assets/index.html.ac8a1f76.js"><link rel="prefetch" href="/TIL/assets/index.html.2cd889b0.js"><link rel="prefetch" href="/TIL/assets/index.html.12f94eba.js"><link rel="prefetch" href="/TIL/assets/index.html.6735721c.js"><link rel="prefetch" href="/TIL/assets/index.html.67b7999c.js"><link rel="prefetch" href="/TIL/assets/index.html.2b170926.js"><link rel="prefetch" href="/TIL/assets/index.html.cc2e2987.js"><link rel="prefetch" href="/TIL/assets/index.html.415a063b.js"><link rel="prefetch" href="/TIL/assets/index.html.ce8b7098.js"><link rel="prefetch" href="/TIL/assets/index.html.c35b015c.js"><link rel="prefetch" href="/TIL/assets/index.html.53c67abf.js"><link rel="prefetch" href="/TIL/assets/index.html.69415c46.js"><link rel="prefetch" href="/TIL/assets/index.html.619c9086.js"><link rel="prefetch" href="/TIL/assets/index.html.01b51be8.js"><link rel="prefetch" href="/TIL/assets/index.html.5e33a4ba.js"><link rel="prefetch" href="/TIL/assets/index.html.aa2fc20b.js"><link rel="prefetch" href="/TIL/assets/index.html.4d2ac5f4.js"><link rel="prefetch" href="/TIL/assets/index.html.1e7405a9.js"><link rel="prefetch" href="/TIL/assets/index.html.7bea3476.js"><link rel="prefetch" href="/TIL/assets/index.html.70adf1b7.js"><link rel="prefetch" href="/TIL/assets/index.html.a30f4279.js"><link rel="prefetch" href="/TIL/assets/index.html.fa8e76a8.js"><link rel="prefetch" href="/TIL/assets/index.html.e555de6c.js"><link rel="prefetch" href="/TIL/assets/index.html.2bd38096.js"><link rel="prefetch" href="/TIL/assets/index.html.ac645fd4.js"><link rel="prefetch" href="/TIL/assets/index.html.11300d5a.js"><link rel="prefetch" href="/TIL/assets/index.html.34665943.js"><link rel="prefetch" href="/TIL/assets/index.html.afcc3140.js"><link rel="prefetch" href="/TIL/assets/index.html.ef50c911.js"><link rel="prefetch" href="/TIL/assets/index.html.78ea36c9.js"><link rel="prefetch" href="/TIL/assets/index.html.ab05229c.js"><link rel="prefetch" href="/TIL/assets/index.html.ae68741f.js"><link rel="prefetch" href="/TIL/assets/index.html.ef9a26cb.js"><link rel="prefetch" href="/TIL/assets/index.html.5592e12e.js"><link rel="prefetch" href="/TIL/assets/index.html.d73769e9.js"><link rel="prefetch" href="/TIL/assets/index.html.ab1ccbb7.js"><link rel="prefetch" href="/TIL/assets/index.html.437ecec1.js"><link rel="prefetch" href="/TIL/assets/404.html.0f07aaf0.js"><link rel="prefetch" href="/TIL/assets/index.html.fa1f6626.js"><link rel="prefetch" href="/TIL/assets/index.html.d06caad8.js"><link rel="prefetch" href="/TIL/assets/index.html.57934ef8.js"><link rel="prefetch" href="/TIL/assets/index.html.bd5185df.js"><link rel="prefetch" href="/TIL/assets/index.html.d5bec3b9.js"><link rel="prefetch" href="/TIL/assets/index.html.3fd97dba.js"><link rel="prefetch" href="/TIL/assets/index.html.a284a928.js"><link rel="prefetch" href="/TIL/assets/index.html.8cb541dd.js"><link rel="prefetch" href="/TIL/assets/index.html.0910e44f.js"><link rel="prefetch" href="/TIL/assets/index.html.c6fbfba5.js"><link rel="prefetch" href="/TIL/assets/index.html.9534f2bb.js"><link rel="prefetch" href="/TIL/assets/index.html.c8257223.js"><link rel="prefetch" href="/TIL/assets/index.html.e7727124.js"><link rel="prefetch" href="/TIL/assets/index.html.0318cb4b.js"><link rel="prefetch" href="/TIL/assets/index.html.8eee8cf7.js"><link rel="prefetch" href="/TIL/assets/index.html.3fad3765.js"><link rel="prefetch" href="/TIL/assets/index.html.a1e9fd2e.js"><link rel="prefetch" href="/TIL/assets/index.html.61054e41.js"><link rel="prefetch" href="/TIL/assets/index.html.8e4344b6.js"><link rel="prefetch" href="/TIL/assets/index.html.96cdc6f0.js"><link rel="prefetch" href="/TIL/assets/index.html.cdab70ca.js"><link rel="prefetch" href="/TIL/assets/index.html.008e6228.js"><link rel="prefetch" href="/TIL/assets/index.html.158e8579.js"><link rel="prefetch" href="/TIL/assets/index.html.52239203.js"><link rel="prefetch" href="/TIL/assets/index.html.cf75a9ab.js"><link rel="prefetch" href="/TIL/assets/index.html.53239c4a.js"><link rel="prefetch" href="/TIL/assets/index.html.2bbfd5ff.js"><link rel="prefetch" href="/TIL/assets/index.html.b72a6f45.js"><link rel="prefetch" href="/TIL/assets/index.html.93fef834.js"><link rel="prefetch" href="/TIL/assets/index.html.29f41cf9.js"><link rel="prefetch" href="/TIL/assets/index.html.2d150691.js"><link rel="prefetch" href="/TIL/assets/index.html.37af3ff4.js"><link rel="prefetch" href="/TIL/assets/index.html.2ba95322.js"><link rel="prefetch" href="/TIL/assets/index.html.3b670524.js"><link rel="prefetch" href="/TIL/assets/index.html.0a64ac08.js"><link rel="prefetch" href="/TIL/assets/index.html.0c6aba1e.js"><link rel="prefetch" href="/TIL/assets/index.html.1ded8e84.js"><link rel="prefetch" href="/TIL/assets/index.html.12481060.js"><link rel="prefetch" href="/TIL/assets/index.html.79c256b0.js"><link rel="prefetch" href="/TIL/assets/index.html.69310c1f.js"><link rel="prefetch" href="/TIL/assets/index.html.b42a807f.js"><link rel="prefetch" href="/TIL/assets/index.html.d628392b.js"><link rel="prefetch" href="/TIL/assets/index.html.0afa1e5e.js"><link rel="prefetch" href="/TIL/assets/index.html.1aa469b9.js"><link rel="prefetch" href="/TIL/assets/index.html.3ce9528f.js"><link rel="prefetch" href="/TIL/assets/index.html.a4dc5052.js"><link rel="prefetch" href="/TIL/assets/index.html.661aea39.js"><link rel="prefetch" href="/TIL/assets/index.html.0a418e2d.js"><link rel="prefetch" href="/TIL/assets/index.html.b7315844.js"><link rel="prefetch" href="/TIL/assets/index.html.6f6d0314.js"><link rel="prefetch" href="/TIL/assets/index.html.cec484f2.js"><link rel="prefetch" href="/TIL/assets/index.html.b62a5251.js"><link rel="prefetch" href="/TIL/assets/index.html.4a3834e4.js"><link rel="prefetch" href="/TIL/assets/index.html.37c87125.js"><link rel="prefetch" href="/TIL/assets/index.html.530d4d47.js"><link rel="prefetch" href="/TIL/assets/index.html.e38f24d8.js"><link rel="prefetch" href="/TIL/assets/index.html.606174ae.js"><link rel="prefetch" href="/TIL/assets/index.html.134a1ca1.js"><link rel="prefetch" href="/TIL/assets/index.html.d93dd38a.js"><link rel="prefetch" href="/TIL/assets/index.html.578570fe.js"><link rel="prefetch" href="/TIL/assets/404.html.5353916e.js"><link rel="prefetch" href="/TIL/assets/404.d71a241f.js"><link rel="prefetch" href="/TIL/assets/Layout.3d048105.js">
    <link rel="stylesheet" href="/TIL/assets/style.dd266a76.css">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/TIL/" class=""><img class="logo" src="https://avatars1.githubusercontent.com/u/18749057?s=460&amp;v=4" alt="개발자 황준일"><span class="site-name can-hide">개발자 황준일</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/TIL/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><a href="/TIL/About/" class="" aria-label="About"><!--[--><!--]--> About <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/TIL/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><a href="/TIL/About/" class="" aria-label="About"><!--[--><!--]--> About <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">단국대학교 강의 시간표를 제공하는 서비스를 만들자 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/TIL/side-project/dku-schedule-manager/#_0-간단한-요약" class="router-link-active router-link-exact-active sidebar-item" aria-label="0. 간단한 요약"><!--[--><!--]--> 0. 간단한 요약 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/TIL/side-project/dku-schedule-manager/#_1-번뜩" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. 번뜩"><!--[--><!--]--> 1. 번뜩 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/TIL/side-project/dku-schedule-manager/#_2-시간표-긁어오기" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. 시간표 긁어오기"><!--[--><!--]--> 2. 시간표 긁어오기 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/TIL/side-project/dku-schedule-manager/#_3-fe" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. FE"><!--[--><!--]--> 3. FE <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/TIL/side-project/dku-schedule-manager/#프로젝트-구성" class="router-link-active router-link-exact-active sidebar-item" aria-label="프로젝트 구성"><!--[--><!--]--> 프로젝트 구성 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/TIL/side-project/dku-schedule-manager/#vue3의-script-setup" class="router-link-active router-link-exact-active sidebar-item" aria-label="Vue3의 script setup"><!--[--><!--]--> Vue3의 script setup <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/TIL/side-project/dku-schedule-manager/#디자인시스템" class="router-link-active router-link-exact-active sidebar-item" aria-label="디자인시스템"><!--[--><!--]--> 디자인시스템 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/TIL/side-project/dku-schedule-manager/#시간표-저장" class="router-link-active router-link-exact-active sidebar-item" aria-label="시간표 저장"><!--[--><!--]--> 시간표 저장 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/TIL/side-project/dku-schedule-manager/#시간표-공유" class="router-link-active router-link-exact-active sidebar-item" aria-label="시간표 공유"><!--[--><!--]--> 시간표 공유 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/TIL/side-project/dku-schedule-manager/#시간표-검색" class="router-link-active router-link-exact-active sidebar-item" aria-label="시간표 검색"><!--[--><!--]--> 시간표 검색 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/TIL/side-project/dku-schedule-manager/#vite에서-프로젝트-외부-데이터-접근" class="router-link-active router-link-exact-active sidebar-item" aria-label="Vite에서 프로젝트 외부 데이터 접근"><!--[--><!--]--> Vite에서 프로젝트 외부 데이터 접근 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/TIL/side-project/dku-schedule-manager/#배포" class="router-link-active router-link-exact-active sidebar-item" aria-label="배포"><!--[--><!--]--> 배포 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/TIL/side-project/dku-schedule-manager/#_4-홍보" class="router-link-active router-link-exact-active sidebar-item" aria-label="4. 홍보"><!--[--><!--]--> 4. 홍보 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/TIL/side-project/dku-schedule-manager/#후기" class="router-link-active router-link-exact-active sidebar-item" aria-label="후기"><!--[--><!--]--> 후기 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/TIL/side-project/dku-schedule-manager/#기타" class="router-link-active router-link-exact-active sidebar-item" aria-label="기타"><!--[--><!--]--> 기타 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--[--><div class="hit"><img src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https://junilhwang.github.io/TIL/side-project/dku-schedule-manager/&amp;count_bg=%230099FF&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=%EC%A1%B0%ED%9A%8C%EC%88%98&amp;edge_flat=true" alt="Hits bn"></div><!--]--><!--]--><div><h1 id="단국대학교-강의-시간표를-제공하는-서비스를-만들자" tabindex="-1"><a class="header-anchor" href="#단국대학교-강의-시간표를-제공하는-서비스를-만들자" aria-hidden="true">#</a> 단국대학교 강의 시간표를 제공하는 서비스를 만들자</h1><img src="/TIL/assets/11.e8043992.jpg" alt="11" style="max-width:1000px;width:100%;"><blockquote><p>본 게시물은 이 사이드 프로젝트를 시작하게 된 계기와 어떤 부분에 대해서 고민했는지 다루고 있습니다.</p></blockquote><ul><li><a href="https://junilhwang.github.io/dku-schedule-manager/" target="_blank" rel="noopener noreferrer">단국대학교 강의 시간표 만들기<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://github.com/junilHwang/dku-schedule-manager" target="_blank" rel="noopener noreferrer">소스코드<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="_0-간단한-요약" tabindex="-1"><a class="header-anchor" href="#_0-간단한-요약" aria-hidden="true">#</a> 0. 간단한 요약</h2><ul><li>대학교 시간표를 긁어서 직접 시간표를 구성할 수 있는 서비스를 만들었다. <s>근데 왜 대학교측에서는 이런 기능을 안만들어주는걸까?</s></li><li>별도의 API서버가 없어도 되도록 구성했다.</li><li>대신에 Github Actions을 이용했다.</li><li>Github Actions을 실행하여 시간표를 1시간마다 읽어들여서 json 파일로 저장한다.</li><li>저장된 json 파일을 이용하여 FE에서 시간표를 구성할 수 있게 만들었다.</li><li>Github Pages로 호스팅했다.</li></ul><h2 id="_1-번뜩" tabindex="-1"><a class="header-anchor" href="#_1-번뜩" aria-hidden="true">#</a> 1. 번뜩</h2><p>대학교 재학 시절, 방학 때 마다 언제 시간표가 올라오나 기다렸고, 시간표가 올라와도 언제 <a href="https://everytime.kr/" target="_blank" rel="noopener noreferrer">에브리타임<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>에 업로드되나 또 기다렸다. <s>그 시절에는 왜 직접 시간표 서비스를 만들 생각을 하지 않았을까?</s></p><p>에브리타임은 전국의 모든 대학교를 대상으로 서비스하기 때문에 누군가가 누군가가 에브리타임 측에 시간표를 정리해서 보내지 않으면 아무도 에브리타임 내에서 시간표를 만들 수 없었다. 이건 지금도 마찬가지인 상황이다.</p><img src="/TIL/assets/1.d38069ce.jpg" alt="1" width="600px"><p>여기서 중요한 점은 에브리타임은 모든 학교를 대상으로 완전 자동화 하기가 힘들다는 것이다. 그래서 나는 내 모교인 단국대학교를 타겟팅하여 시간표 서비스를 만들어야겠다고 생각했다.</p><h2 id="_2-시간표-긁어오기" tabindex="-1"><a class="header-anchor" href="#_2-시간표-긁어오기" aria-hidden="true">#</a> 2. 시간표 긁어오기</h2><p>처음에는 아예 API 서버를 만들까 고민했었는데, 서버를 만들게 될 경우 골치아픈 상황이 많을 것 같아서 일단 보류했다. 그래도 API 서버가 있으면 할 수 있는 일이 무척 많아진다. 내가 재학생이 아니라서 웹 포털의 모든 기능을 사용할 수 없는게 아쉬울뿐..</p><p>만약에 API 서버가 있다는 가정 하에 할 수 있는 일들을 나열해보자면</p><ul><li>서비스에서 만든 시간표를, 그대로 대학교 웹 포털에 등록하기</li><li>시간표 공유 <ul><li>지금도 이미지 기반으로 가능하긴 함</li></ul></li><li>실시간 채팅</li><li><s>등록된 시간표를 기반으로 수강신청</s><ul><li>하면 잡혀감. 철컹철컹</li><li>이론상 가능하긴 함</li></ul></li><li>기타 등등..?</li><li>사실 지금 당장 생각나는게 딱히 없다.</li><li>할 수 있는게 무궁무진 하긴 하다.</li></ul><p>어쨌든 별도의 서버가 없는 상태에서, 단국대 포털에 시간표가 올라오자마자 이를 읽어들이고 서비스로 제공해야 한다.</p><p>강의 시간표는 <a href="https://webinfo.dankook.ac.kr/tiac/univ/lssn/lpci/views/lssnPopup/tmtbl.do" target="_blank" rel="noopener noreferrer">이 링크<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>에서 검색해볼 수 있는데, 검색 조건을 설정하고 전송하면 다음과 같은 네트워크 요청을 보낸다.</p><p><img src="/TIL/assets/2.732ae518.jpg" alt="2"></p><p>이 때 다음과 같이 크롬에서 발생한 네트워크 전송을 cURL 요청으로 복사하여 확인해볼 수 있다.</p><p><img src="/TIL/assets/3.ebb606b6.jpg" alt="3"></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token string">&#39;https://webinfo.dankook.ac.kr/tiac/univ/lssn/lpci/views/lssnPopup/tmtbl.do&#39;</span> <span class="token punctuation">\</span>
  -H <span class="token string">&#39;Connection: keep-alive&#39;</span> <span class="token punctuation">\</span>
  -H <span class="token string">&#39;Cache-Control: max-age=0&#39;</span> <span class="token punctuation">\</span>
  -H <span class="token string">&#39;sec-ch-ua: &quot; Not;A Brand&quot;;v=&quot;99&quot;, &quot;Google Chrome&quot;;v=&quot;97&quot;, &quot;Chromium&quot;;v=&quot;97&quot;&#39;</span> <span class="token punctuation">\</span>
  -H <span class="token string">&#39;sec-ch-ua-mobile: ?0&#39;</span> <span class="token punctuation">\</span>
  -H <span class="token string">&#39;sec-ch-ua-platform: &quot;macOS&quot;&#39;</span> <span class="token punctuation">\</span>
  -H <span class="token string">&#39;Upgrade-Insecure-Requests: 1&#39;</span> <span class="token punctuation">\</span>
  -H <span class="token string">&#39;Origin: https://webinfo.dankook.ac.kr&#39;</span> <span class="token punctuation">\</span>
  -H <span class="token string">&#39;Content-Type: application/x-www-form-urlencoded&#39;</span> <span class="token punctuation">\</span>
  -H <span class="token string">&#39;User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Safari/537.36&#39;</span> <span class="token punctuation">\</span>
  -H <span class="token string">&#39;Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&#39;</span> <span class="token punctuation">\</span>
  -H <span class="token string">&#39;Sec-Fetch-Site: same-origin&#39;</span> <span class="token punctuation">\</span>
  -H <span class="token string">&#39;Sec-Fetch-Mode: navigate&#39;</span> <span class="token punctuation">\</span>
  -H <span class="token string">&#39;Sec-Fetch-User: ?1&#39;</span> <span class="token punctuation">\</span>
  -H <span class="token string">&#39;Sec-Fetch-Dest: document&#39;</span> <span class="token punctuation">\</span>
  -H <span class="token string">&#39;Referer: https://webinfo.dankook.ac.kr/tiac/univ/lssn/lpci/views/lssnPopup/tmtbl.do&#39;</span> <span class="token punctuation">\</span>
  -H <span class="token string">&#39;Accept-Language: ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7,ru;q=0.6&#39;</span> <span class="token punctuation">\</span>
  -H <span class="token string">$&#39;Cookie: _ga=GA1.3.323624598.1551946103; __utmz=245676305.1610941513.125.87.utmcsr=github.com|utmccn=(referral)|utmcmd=referral|utmcct=/; WMONID=MVr1R3I7eJH; CMS_JSESSIONID=AgULShDkdidZumNdj8LOsNh8LDcEccprVFI60NfwaeKApnjVnoe0<span class="token entity" title="\u0021">\u0021</span>-364676328; __utma=245676305.323624598.1551946103.1642701274.1643112161.150; __utmc=245676305; __utmt=1; __utmb=245676305.1.10.1643112161; TIS_JSESSIONID=VI19I6y0L0R7XxBoRlrUsUoOE4UMUpFRmZf0gopY5exZg2z5Kt5g<span class="token entity" title="\u0021">\u0021</span>-1807917221&#39;</span> <span class="token punctuation">\</span>
  --data-raw <span class="token string">&#39;yy=2022&amp;semCd=1&amp;qrySxn=2&amp;curiCparCd=&amp;lesnPlcCd=1&amp;mjSubjKnm=&amp;mjDowCd=&amp;grade=&amp;pfltNm=&#39;</span> <span class="token punctuation">\</span>
  --compressed
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>위에서 불필요한 파라미터를 날려버리고, 필요한 부분만 추출하면 다음과 같다.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># content-type, accept, data-raw(request body)를 제외한 나머지는 모두 제거한다.</span>
<span class="token function">curl</span> <span class="token string">&#39;https://webinfo.dankook.ac.kr/tiac/univ/lssn/lpci/views/lssnPopup/tmtbl.do&#39;</span> <span class="token punctuation">\</span>
  -H <span class="token string">&#39;Content-Type: application/x-www-form-urlencoded&#39;</span> <span class="token punctuation">\</span>
  -H <span class="token string">&#39;Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&#39;</span> <span class="token punctuation">\</span>
  --data-raw <span class="token string">&#39;yy=2022&amp;semCd=1&amp;qrySxn=2&amp;curiCparCd=&amp;lesnPlcCd=1&amp;mjSubjKnm=&amp;mjDowCd=&amp;grade=&amp;pfltNm=&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>위의 curl 명령어를 실행해보면 다음과 같은 결과를 볼 수 있다.</p><p><img src="/TIL/assets/4.5289c9ad.jpg" alt="4"></p><p>혹시 직접 실행해보았는가? 그렇다면 검색된 시간표가 HTML로 출력되는 것을 확인할 수 있을 것이다.</p><p>그런데 갑자기 accept를 <code>application/json</code> 으로 수정해보고 싶었다.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 수신 방식(accept)은 application/json 으로</span>
<span class="token comment"># 전송 데이터는 다음과 같음</span>
<span class="token function">curl</span> <span class="token string">&#39;https://webinfo.dankook.ac.kr/tiac/univ/lssn/lpci/views/lssnPopup/tmtbl.do&#39;</span> <span class="token punctuation">\</span>
  -H <span class="token string">&#39;Content-Type: application/x-www-form-urlencoded&#39;</span> <span class="token punctuation">\</span>
  -H <span class="token string">&#39;Accept: application/json&#39;</span> <span class="token punctuation">\</span>
  --data-raw <span class="token string">&#39;yy=2022&amp;semCd=1&amp;qrySxn=2&amp;curiCparCd=&amp;lesnPlcCd=1&amp;mjSubjKnm=&amp;mjDowCd=&amp;grade=&amp;pfltNm=&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>그랬더니 응답값을 JSON으로 보내줬다.</p><p><img src="/TIL/assets/5.c0cc1669.jpg" alt="5"></p><img src="/TIL/assets/6.3bd6d244.jpg" alt="6" width="400"><p>혹시나 해서 시도해봤는데, JSON으로 보내줬다. <s>개이득</s></p><p>왜 그런가 추측해봤는데 spring의 controller에서 ModelAndView를 사용해서 endpoint를 구성하면 accept에 따라서 응답값의 형태가 달라지는 것 같다. <s>아마 맞을 것 같은데 알아보기가 귀찮다.</s></p><p>어쨌든 결과적으로 HTML을 파싱해야 하는 수고를 덜었기 때문에 기분이 좋아졌다.</p><p>필요한 HTTP 요청을 확인했으니, 직접 코드로 만들어보자. 필자는 프론트엔드 개발자로 일하고 있기 때문에 NestJS를 이용해서(<s>무슨상관인데?</s>) 프로젝트를 구성했다.</p><div class="custom-container tip"><p class="custom-container-title">NestJS</p><ul><li>Nest(NestJS)는 효율적이고 확장 가능한 Node.js 서버 측 애플리케이션을 구축하기 위한 프레임워크입니다.</li><li>프로그레시브 JavaScript를 사용하고 TypeScript로 구축되고 완벽하게 지원하며, OOP, FP, FRP의 요소를 결합하여 사용할 수 있습니다.</li><li>내부적으로 Nest는 Express(기본값)와 같은 강력한 HTTP 서버 프레임워크를 사용하며 선택적으로 Fastify도 사용하도록 구성할 수 있습니다.</li><li>Nest는 이러한 일반적인 Node.js 프레임워크(Express/Fastify)보다 높은 수준의 추상화를 제공하지만 해당 API를 개발자에게 직접 노출합니다.</li><li>이를 통해 개발자는 기본 플랫폼에서 사용할 수 있는 수많은 타사 모듈을 자유롭게 사용할 수 있습니다.</li></ul><p>라고 <a href="https://docs.nestjs.com/" target="_blank" rel="noopener noreferrer">공식문서<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>에 나와있다.</p></div><p>NestJS는 webserver 뿐만 아니라 <a href="https://docs.nestjs.com/standalone-applications" target="_blank" rel="noopener noreferrer">standalone application<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>으로도 사용할 수 있다.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> NestFactory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@nestjs/core&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AppModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./app.module&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AppService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./app.service&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">bootstrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">await</span> NestFactory<span class="token punctuation">.</span><span class="token function">createApplicationContext</span><span class="token punctuation">(</span>AppModule<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> appService<span class="token operator">:</span> AppService <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>AppService<span class="token punctuation">)</span><span class="token punctuation">;</span>

  appService<span class="token punctuation">.</span><span class="token function">saveSchedule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// appService에서 데이터를 저장함</span>

  <span class="token keyword">await</span> app<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">bootstrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>위와 같이 <code>NestFactory.createApplicationContext</code> 으로 만들 경우 단순하게 Nest로 구성된 코드를 실행해준다. 많은 기능이 필요 없기 때문에 appService에 schedule을 저장하는 코드를 구성했다.</p><p><a href="https://github.dev/JunilHwang/dku-schedule-manager/blob/master/.packages/dku-schedule-cralwer/src/app.service.ts" target="_blank" rel="noopener noreferrer">&gt; 전체 코드 보기 &lt;<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> payloads <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    yy<span class="token operator">:</span> <span class="token number">2021</span><span class="token punctuation">,</span> <span class="token comment">// 년도</span>
    semCd<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>  <span class="token comment">// 학기</span>
    qrySxn<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token comment">// 1: 전공, 2: 교양</span>
    lesnPlcCd<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 1: 죽전캠, 2: 천안캠</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/* 위의 양식에 따라 2021년 2학기 ~ 2022년 1학기 페이로드를 작성함 */</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Injectable</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AppService</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">readonly</span> scheduleClient<span class="token operator">:</span> AxiosInstance<span class="token punctuation">;</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> scheduleClient <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      baseURL<span class="token operator">:</span> <span class="token string">&quot;https://webinfo.dankook.ac.kr&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    scheduleClient<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> data <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>scheduleClient <span class="token operator">=</span> scheduleClient<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">saveSchedule</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> dataPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">INIT_CWD</span><span class="token punctuation">,</span> <span class="token string">&quot;../../data&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2021년 2학기와 2022년 1학기에 대한 모든 시간표 정보를 저장한다.</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> payload<span class="token punctuation">]</span> <span class="token keyword">of</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>payloadMap<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> lectures<span class="token operator">:</span> Lecture<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchSchedule</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">;</span>
      fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dataPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token comment">// 원래 더 복잡한 로직이지만, 일단 간단하게 표현했음</span>
        <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>lectures<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 시간표를 가져오기 위한 API 요청</span>
  <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">fetchSchedule</span><span class="token punctuation">(</span>payload<span class="token operator">:</span> PayloadBody<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Lecture<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> scheduleClient <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">&quot;/tiac/univ/lssn/lpci/views/lssnPopup/tmtbl.do&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">[</span>k<span class="token punctuation">,</span> v<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>k<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>v<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span> headers <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> response<span class="token operator">:</span> ScheduleResponse <span class="token operator">=</span> <span class="token keyword">await</span> scheduleClient<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>
      url<span class="token punctuation">,</span>
      data<span class="token punctuation">,</span>
      config<span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 원래 response에 별에별 정보가 다 들어있으나.. 딱 시간표 정보만 추출함</span>
    <span class="token keyword">return</span> response<span class="token punctuation">.</span>lctTmtblDscMjList<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>코드로 보면 좀 복잡해보일 수 있는데, 요약하자면 다음과 같은 기능을 수행하는 것이다.</p><ul><li><p>단국대 포털에서 다음과 같은 데이터를 가져온다.</p><ul><li>죽전 캠퍼스의 2021년 2학기 교양 시간표</li><li>천안 캠퍼스의 2021년 2학기 교양 시간표</li><li>죽전 캠퍼스의 2021년 2학기 전공 시간표</li><li>천안 캠퍼스의 2021년 2학기 전공 시간표</li><li>죽전 캠퍼스의 2022년 1학기 교양 시간표</li><li>천안 캠퍼스의 2022년 1학기 교양 시간표</li><li>죽전 캠퍼스의 2022년 1학기 전공 시간표</li><li>천안 캠퍼스의 2022년 1학기 전공 시간표</li></ul></li><li><p>2021년 데이터는 테스트를 위해서 가져온다고 보면 된다.</p></li><li><p>시간표를 가져온다음에 JSON 파일로 저장한다.</p><p><img src="/TIL/assets/7.9c3a2c5c.jpg" alt="7"></p><ul><li><s>음.. 그렇다. 별거 없다.</s></li><li>그런데 여기서부터가 제일 중요하다.</li><li><strong>API 서버를 만들지 않기 위해서 github repository를 적극적으로 사용하는 것</strong>이다.</li></ul></li><li><p>github actions을 이용하여 위의 프로세스를 주기적으로 실행한다.</p><ul><li>1시간 주기로 실행하면 적당할 것 같다.</li></ul></li><li><p>json파일이 만들어지면</p><ul><li>commit 후에</li><li>github repository에 push한다. → 이게 제일 중요하다.</li></ul></li><li><p>push가 되는 순간, github pages가 호스팅 된다.</p></li><li><p>github pages에서 json 파일을 읽어들인 후에 시간표를 구성할 수 있도록 만든다.</p><ul><li>여기서부터는 frontend의 영역이라고 보면 된다.</li></ul></li></ul><p>조금 흐름이 끊긴 감이 없지않아 있지만, 어쨌든 github actions을 구성해보자.</p><div class="custom-container tip"><p class="custom-container-title">Github Actions</p><ul><li>Github Actions = Workflow 자동화 도구</li><li>Github Actions를 사용하면 이제 세계적 수준의 CI/CD를 통해 모든 소프트웨어 워크플로를 쉽게 자동화할 수 있습니다.</li><li>Github에서 바로 코드를 빌드, 테스트 및 배포하세요. 코드 검토, 분기 관리 및 문제 분류가 원하는 방식으로 작동하도록 합니다.</li></ul><p>라고 공식문서에 나와있다.</p></div><p>project root를 기준으로 <code>.github/workflows/main.yml</code> 폴더를 만들거나 그냥 github actions에서 workflow를 추가해도 된다.</p><p><img src="/TIL/assets/8.0011a8d1.jpg" alt="8"></p><p>actions tab으로 이동한 다음에 <code>New workflow</code> 버튼을 클릭하면 만들어진다.</p><p>그리고 다음과 같이 작성했다.</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&quot;Schedule Save&quot;</span>

<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">schedule</span><span class="token punctuation">:</span>
    <span class="token comment"># 1시간 마다 실행</span>
    <span class="token punctuation">-</span> <span class="token key atrule">cron</span><span class="token punctuation">:</span> <span class="token string">&#39;0 */1 * * *&#39;</span>

  <span class="token key atrule">workflow_dispatch</span><span class="token punctuation">:</span>

<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build</span><span class="token punctuation">:</span>
    <span class="token comment"># ubuntu imageFmf tkdydgksek.</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest

    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token comment"># 현재 repository로 checkout</span>
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@master
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">ref</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> github.head_ref <span class="token punctuation">}</span><span class="token punctuation">}</span>

      <span class="token comment"># node를 사용한다.</span>
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v2

      <span class="token comment"># 패키지를 설치하고, build하고, build된걸 실행하는 과정이라고 보면 된다.</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Data Save
          <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
          cd .packages/dku-schedule-cralwer
          yarn install
          yarn build
          yarn start:prod
          cd ../..</span>

      <span class="token comment"># 저장된 json파일을 github repository에 push 한다.</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Commit And Push
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions<span class="token punctuation">-</span>js/push@master
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">github_token</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GITHUB_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">author_email</span><span class="token punctuation">:</span> junil.h@kakao.com
          <span class="token key atrule">author_name</span><span class="token punctuation">:</span> JunilHwang
          <span class="token key atrule">branch</span><span class="token punctuation">:</span> master
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/TIL/assets/9.721aa4c3.jpg" alt="9"></p><p>기본적으로 1시간 마다 실행되도록 구성했으며, 필요하다면 직접 workflow를 실행해도 된다.</p><p><img src="/TIL/assets/10.94d0b3a7.jpg" alt="10"></p><p>글을 작성하고 있는 날짜에 시간표가 계속 업데이트 되고 있어서 commit 내역이 자동으로 많아지고 있다. <s>개이득</s></p><h2 id="_3-fe" tabindex="-1"><a class="header-anchor" href="#_3-fe" aria-hidden="true">#</a> 3. FE</h2><p><img src="/TIL/assets/11.e8043992.jpg" alt="11"></p><p>회사에서 신규 프로젝트를 Vue3 + Vite + Typescript로 진행할 예정이여서, 사이드 프로젝트에도 똑같은 기술 스택을 적용했다.</p><p>참고로 vite의 장점은 다음과 같다.</p><p><img src="/TIL/assets/12.62147be4.jpg" alt="12"></p><ul><li>번들링을 하지 않기 때문에 실행 속도가 무척 빠르다. <ul><li>브라우저 모듈을 사용한다. <ul><li>내부적으로 rollup을 사용한다.</li><li>브라우저 모듈을 사용하기 때문에 프로젝트 규모와 상관 없이 로딩 속도가 일정하다.</li></ul></li><li>즉, IE는 지원하지 않는다.</li><li>억지로 지원할 수 있도록 환경을 구성할 순 있지만, 그렇다면 vite를 사용하는 이유가 없다.</li></ul></li><li>핫 모듈 시스템이 빠르게 작동한다. <ul><li>파일이 변경되고 서버가 다시 실행되는 과정이 정말 빠르다.</li><li>웹팩이랑 비교 불가</li></ul></li><li>vue, react 등의 프레임워크를 사용하기 위한 템플릿을 제공한다.</li></ul><h3 id="프로젝트-구성" tabindex="-1"><a class="header-anchor" href="#프로젝트-구성" aria-hidden="true">#</a> 프로젝트 구성</h3><p>vite 프로젝트 구성은 다음과 같이 할 수 있다.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">yarn</span> create vite <span class="token punctuation">[</span>프로젝트 이름<span class="token punctuation">]</span> --template <span class="token punctuation">[</span>템플릿 이름<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>vite template은 <code>vanilla</code> <code>vanilla-ts</code> <code>vue</code> <code>vue-ts</code> <code>react</code> <code>react-ts</code> <code>preact</code> <code>preact-ts</code> <code>lit</code> <code>lit-ts</code> <code>svelte`` svelte-ts</code> 등이 존재한다. 자세한건 <a href="https://vitejs.dev/guide/#scaffolding-your-first-vite-project" target="_blank" rel="noopener noreferrer">공식문서<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>에서 확인해볼 수 있다.</p><p>어쨌든 나는 <code>vue-ts</code>로 구성했다.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">yarn</span> create vite dku-schedule-client --template vue-ts
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>추가로 vue-router도 설치했다. vue3와 같이 사용하기 위해선 최신 버전 router를 설치해야 한다.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">yarn</span> <span class="token function">add</span> vue-router@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>그러면 다음과 같이 <code>package.json</code>이 구성될 것이다.</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dku-schedule-client&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-tsc --noEmit &amp;&amp; vite build&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;preview&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite preview&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.2.25&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;vue-router&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.0.12&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;@vitejs/plugin-vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;typescript&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.4.4&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;vite&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.7.2&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;vue-tsc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.29.8&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="vue3의-script-setup" tabindex="-1"><a class="header-anchor" href="#vue3의-script-setup" aria-hidden="true">#</a> Vue3의 script setup</h3><p>vue3에서 제일 신기했던(?) 것은 <code>&lt;script setup&gt;</code> 이다. 따로 export를 하지 않아도 되고, 선언된 변수를 template 내부에서 그냥 사용하면 된다.</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token string">&#39;Hello!&#39;</span>

<span class="token keyword">function</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>log<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ msg }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>그리고 react의 useEffect 같은 hook도 있다.</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> watchEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> $root <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>root<span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>This is a root element<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>template ref를 사용하려면 위와 같은 방식으로 사용해야 정상적으로 작동한다.</p><h3 id="디자인시스템" tabindex="-1"><a class="header-anchor" href="#디자인시스템" aria-hidden="true">#</a> 디자인시스템</h3><p>디자인 시스템은 ElementUI Plus를 사용했다.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">yarn</span> <span class="token function">add</span> element-plus @element-plus/icons-vue
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>element ui plus의 icon을 사용하기 위해서 별도의 패키지를 추가로 설치해야 한다.</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ElementPlus <span class="token keyword">from</span> <span class="token string">&quot;element-plus&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;element-plus/dist/index.css&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./styles/reset.scss&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 한글어팩 적용</span>
<span class="token keyword">import</span> ko <span class="token keyword">from</span> <span class="token string">&quot;element-plus/es/locale/lang/ko&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./App.vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> router <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./router&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>ElementPlus<span class="token punctuation">,</span> <span class="token punctuation">{</span> locale<span class="token operator">:</span> ko <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// App에 등록</span>
  <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>그러면 다음과 같이 사용할 수 있다.</p><p><img src="/TIL/assets/13.6951e4c4.jpg" alt="13"></p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// icon 관련 component를 가져온다.</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Download<span class="token punctuation">,</span> Search<span class="token punctuation">,</span> Share <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@element-plus/icons-vue&quot;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>controller<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button-group</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">:icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Search<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>emit(<span class="token punctuation">&#39;</span>search<span class="token punctuation">&#39;</span>)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">round</span> <span class="token attr-name">plain</span><span class="token punctuation">&gt;</span></span>
      검색
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span>
      <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ label, value } in conditions<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value === condition ? <span class="token punctuation">&#39;</span>primary<span class="token punctuation">&#39;</span> : <span class="token punctuation">&#39;</span>default<span class="token punctuation">&#39;</span><span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>emit(<span class="token punctuation">&#39;</span>select-semester<span class="token punctuation">&#39;</span>, value)<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">round</span>
    <span class="token punctuation">&gt;</span></span>
      {{ label }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button-group</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button-group</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>shares<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-popover</span>
      <span class="token attr-name">placement</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>top-start<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">trigger</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hover<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>클립보드에 시간표 URL을 복사합니다.<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#reference</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>emit(<span class="token punctuation">&#39;</span>share<span class="token punctuation">&#39;</span>)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Share<span class="token punctuation">&quot;</span></span> <span class="token attr-name">round</span> <span class="token attr-name">plain</span><span class="token punctuation">&gt;</span></span>
          시간표 공유
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-popover</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-popover</span>
      <span class="token attr-name">placement</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>top-start<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">trigger</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hover<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>시간표 이미지를 다운로드합니다.<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#reference</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>emit(<span class="token punctuation">&#39;</span>download<span class="token punctuation">&#39;</span>)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Download<span class="token punctuation">&quot;</span></span> <span class="token attr-name">round</span> <span class="token attr-name">plain</span><span class="token punctuation">&gt;</span></span>
          다운로드
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-popover</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button-group</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>생각보다 더 깔끔해서 만족스러웠다.</p><p>그리고 alert 대신에 사용할 수 있는 Message 관련 API도 존재한다.</p><p><img src="/TIL/assets/14.c40e508b.jpg" alt="14"></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ElMessage <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;element-plus&quot;</span><span class="token punctuation">;</span>

ElMessage<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&quot;삭제되었습니다.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="시간표-저장" tabindex="-1"><a class="header-anchor" href="#시간표-저장" aria-hidden="true">#</a> 시간표 저장</h3><p>시간표를 이미지로 저장하기 위해서 html2canvas를 설치해서 사용했다.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">handleDownload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>$main<span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> $clone <span class="token operator">=</span> $main<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> $cloneHeader <span class="token operator">=</span> $clone<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;header&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  $clone<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.controller&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  $cloneHeader<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">=</span> <span class="token string">&quot;position: static; margin-bottom: -41px;&quot;</span><span class="token punctuation">;</span>
  $clone<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">=</span> <span class="token string">&quot;width: 800px; position: absolute: left: -800px; top: 0;&quot;</span><span class="token punctuation">;</span>
  $main<span class="token punctuation">.</span>value<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>$clone<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// html -&gt; canvas -&gt; base64 -&gt; 다운로드</span>
  <span class="token function">html2canvas</span><span class="token punctuation">(</span>$clone<span class="token punctuation">,</span> <span class="token punctuation">{</span> height<span class="token operator">:</span> $clone<span class="token punctuation">.</span>scrollHeight <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    $clone<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> $anchor <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    $anchor<span class="token punctuation">.</span>href <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">toDataURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    $anchor<span class="token punctuation">.</span>download <span class="token operator">=</span> <span class="token string">&quot;시간표.png&quot;</span><span class="token punctuation">;</span>
    $anchor<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    $main<span class="token punctuation">.</span>value<span class="token punctuation">.</span>style <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>만들어진 시간표를 canvas로 변환하고, 다시 base64로 변환하여 이미지로 다운받을 수 있게 된다.</p><p><img src="/TIL/assets/15.7e4e3081.jpg" alt="15"></p><h3 id="시간표-공유" tabindex="-1"><a class="header-anchor" href="#시간표-공유" aria-hidden="true">#</a> 시간표 공유</h3><p>이렇게 <a href="https://junilhwang.github.io/dku-schedule-manager/shared/?init=%5B%7B%22buldAndRoomCont%22:%22%EC%9B%947~9(%EC%83%81%EA%B2%BD323)%3Cp%3E%EC%88%981~3(%EC%83%81%EA%B2%BD323)%22,%22wkLecrEmpnm%22:%22%EC%9D%B4%EB%B4%89%EC%88%98%22,%22subjMethod%22:null,%22cybCoronaTyNm4%22:null,%22cybCoronaTyNm%22:%22%EC%9B%90%EA%B2%A9%EC%88%98%EC%97%85%22,%22dvclsNb%22:1,%22opOrgid%22:%222000000989%22,%22cybCoronaTyNm2%22:null,%22dsgnCrd%22:0,%22cybCoronaTyNm3%22:null,%22oglngLctLanggCdnm%22:null,%22yy%22:%222022%22,%22cybLtrTyNm%22:null,%22curiCparNm%22:null,%22kor%22:9,%22crd%22:%223(0)%22,%22tmtblChgSxnCd%22:null,%22tmtblChgSxnNm%22:null,%22grade%22:3,%22eng%22:9,%22tkcrsEcaOrgnm%22:%22SW%EC%9C%B5%ED%95%A9%EB%8C%80%ED%95%99%3Cp%3ESW%EC%9C%B5%ED%95%A9%ED%95%99%EB%B6%80%3Cp%3ESW%EC%9C%B5%ED%95%A9%EA%B2%BD%EC%A0%9C%EA%B2%BD%EC%98%81%EC%A0%84%EA%B3%B5%22,%22pfltId%22:%2212011227%22,%22status%22:1,%22subjKnm%22:%22%EA%B5%AD%EC%A0%9C%EA%B8%B0%EC%97%85%EA%B2%BD%EC%98%81%EB%A1%A0%22,%22tkcrsEcaOrgid%22:%222000004874%22,%22subjId%22:%22320190%22,%22semCd%22:%221%22,%22oglngLctLanggCd%22:null,%22checked%22:%220%22%7D,%7B%22buldAndRoomCont%22:%22%EC%9B%944~6(2%EA%B3%B5105)%3Cp%3E%ED%99%941~3(%EC%86%8C%ED%94%84%ED%8A%B8307)%22,%22wkLecrEmpnm%22:%22%EB%82%98%EC%97%B0%EB%AC%B5%22,%22subjMethod%22:null,%22cybCoronaTyNm4%22:null,%22cybCoronaTyNm%22:%22%EC%9B%90%EA%B2%A9%EC%88%98%EC%97%85%22,%22dvclsNb%22:2,%22opOrgid%22:%222000000989%22,%22cybCoronaTyNm2%22:null,%22dsgnCrd%22:0,%22cybCoronaTyNm3%22:null,%22oglngLctLanggCdnm%22:null,%22yy%22:%222022%22,%22cybLtrTyNm%22:null,%22curiCparNm%22:null,%22kor%22:0,%22crd%22:%223(0)%22,%22tmtblChgSxnCd%22:null,%22tmtblChgSxnNm%22:null,%22grade%22:3,%22eng%22:0,%22tkcrsEcaOrgnm%22:%22SW%EC%9C%B5%ED%95%A9%EB%8C%80%ED%95%99%3Cp%3ESW%EC%9C%B5%ED%95%A9%ED%95%99%EB%B6%80%3Cp%3ESW%EC%9C%B5%ED%95%A9%EA%B2%BD%EC%A0%9C%EA%B2%BD%EC%98%81%EC%A0%84%EA%B3%B5%22,%22pfltId%22:%2211932468%22,%22status%22:1,%22subjKnm%22:%22%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4(CE)%22,%22tkcrsEcaOrgid%22:%222000004874%22,%22subjId%22:%22527900%22,%22semCd%22:%221%22,%22oglngLctLanggCd%22:null,%22checked%22:%220%22%7D%5D" target="_blank" rel="noopener noreferrer">링크<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>를 통해서 시간표를 공유할 수 있도록 만들었다. 귀찮아서 그냥 시간표 정보를 전부 uri에 때려박았다. 정확히는, 학교에서 제공하는 각 시간표에 대한 기본키(Primary Key)가 없어서 그냥 통짜로 정보를 집어넣었다. 어차피 크롬 전용으로 제공할 생각이고, 크롬의 경우 어느 정도의 uri 사이즈는 커버가 된다.</p><h3 id="시간표-검색" tabindex="-1"><a class="header-anchor" href="#시간표-검색" aria-hidden="true">#</a> 시간표 검색</h3><ul><li>일단 사이트에 접속하자 마자 모든 시간표 데이터를 가져온다.</li></ul><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 검색 옵션을 초기화하고, 현재 학기에 대한 시간표 데이터를 가져옴</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchLectures</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  searchOptions<span class="token punctuation">.</span>lectures <span class="token operator">=</span> <span class="token keyword">await</span> scheduleService<span class="token punctuation">.</span><span class="token function">getAllSchedules</span><span class="token punctuation">(</span>
    year<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
    semester<span class="token punctuation">.</span>value
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  searchOptions<span class="token punctuation">.</span>days <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  searchOptions<span class="token punctuation">.</span>times <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  searchOptions<span class="token punctuation">.</span>query <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  searchOptions<span class="token punctuation">.</span>grades <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  searchOptions<span class="token punctuation">.</span>majors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  searchOptions<span class="token punctuation">.</span>page <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  searchOptions<span class="token punctuation">.</span>cursor <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  searchOptions<span class="token punctuation">.</span>currentLectures <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">fetchNextData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 데이터가 무척 많기 때문에, 렌더링에 필요한 데이터만 가져오는 함수</span>
<span class="token keyword">function</span> <span class="token function">fetchNextData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* 생략 */</span> <span class="token punctuation">}</span>

<span class="token comment">// 컴포넌트가 로딩 되자 마자 시간표 데이터를 가져옴</span>
<span class="token function">fetchLectures</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>일단 한 학기에 개설되는 강의가 대략 10000개 정도 된다.</li><li>그래서 이걸 한 번에 렌더링 할 경우 당연히 사이트가 버벅일 수 밖에 없다.</li><li>그래서 필요한 갯수만큼, <code>대략 100개씩 끊어서 가져오는 로직</code>이 필요하다.</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">fetchNextData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> grades<span class="token punctuation">,</span> lectures<span class="token punctuation">,</span> days<span class="token punctuation">,</span> times<span class="token punctuation">,</span> query<span class="token punctuation">,</span> currentLectures<span class="token punctuation">,</span> majors <span class="token punctuation">}</span> <span class="token operator">=</span> searchOptions<span class="token punctuation">;</span>

  searchOptions<span class="token punctuation">.</span>page <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>

  <span class="token comment">// arr에 추가로 보여줄 만큼의 데이터를 쌓는다.</span>
  <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token comment">// cursor 부터 반복문을 시작한다.</span>
  <span class="token comment">// cursor가 lectures의 사이즈가 넘어가면 반복문이 종료된다.</span>
  <span class="token keyword">let</span> cursor <span class="token operator">=</span> searchOptions<span class="token punctuation">.</span>cursor<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> cursor <span class="token operator">&lt;</span> lectures<span class="token punctuation">.</span>length<span class="token punctuation">;</span> cursor <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// arr가 pageSize 만큼 채워지면 반복문을 종료한다.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> pageSize<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> lecture <span class="token operator">=</span> lectures<span class="token punctuation">[</span>cursor<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> grade<span class="token punctuation">,</span> buldAndRoomCont<span class="token punctuation">,</span> subjKnm<span class="token punctuation">,</span> tkcrsEcaOrgnm <span class="token punctuation">}</span> <span class="token operator">=</span> lecture<span class="token punctuation">;</span>

    <span class="token comment">// 검색어가 입력된 상태일 때, 검색어로 필터링</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>query<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>subjKnm<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">continue</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 학년이 선택된 상태일 때, 학년으로 필터링</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>grades<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>grades<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">continue</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 전공이 선택된 상태일 때, 전공 정보로 필터링</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>majors<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>majors<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>tkcrsEcaOrgnm<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">continue</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 요일이 선택된 상태일 때, 요일 정보로 필터링</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>
      days<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span>
      buldAndRoomCont <span class="token operator">&amp;&amp;</span>
      days<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>day<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> buldAndRoomCont<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>day<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">continue</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 시간이 선택된 상태일 때, 요일 + 시간으로 필터링</span>
    <span class="token comment">// 사실 이 로직은 문제가 있다. 요일과 시간의 and 조건이 정상적으로 작동하지 않는 상태임</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>
      times<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span>
      times<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>timeKey<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token punctuation">(</span>buldAndRoomCont <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;p&gt;&quot;</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> v<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^([가-힣])(\d+(~\d+)?)(.*)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&quot;$2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> <span class="token punctuation">[</span>start<span class="token punctuation">,</span> end<span class="token punctuation">]</span> <span class="token operator">=</span> v<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;~&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>Number<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>end <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">[</span>start<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token function">Array</span><span class="token punctuation">(</span>end <span class="token operator">-</span> start <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> k<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> v <span class="token operator">+</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> v<span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>timeKey<span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">continue</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 위의 조건들을 다 통과하면, arr에 과목 정보 추가</span>
    arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>lecture<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// cursor값 초기화</span>
  searchOptions<span class="token punctuation">.</span>cursor <span class="token operator">=</span> cursor<span class="token punctuation">;</span>

  <span class="token comment">// 렌더링 될 데이터 추가</span>
  currentLectures<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>딱 봐도 망한 코드다. 정확히는, 리팩토링이 필요하다. 원래 Array 관련 메소드를 사용했었는데 그럴 경우 배열의 모든 요소를 순회하기 때문에 무척 비효율적이다. 배열 사이즈가 1000개 정도면 그냥 쓰겠지만, 10000개 정도 되니까 무조건 최적화가 필요한 상황이다. 그래서 몇 년 만에 이렇게 날 것의 for문을 사용했다. <s>Java의 Stream이 필요하다.</s></p><p>이럴 때 필요한 것이 바로 <code>함수형 프로그래밍</code> 이다. 인프런의 유인동님 강의를 추천한다.</p><p>일단 <a href="https://github.com/marpple/FxTS" target="_blank" rel="noopener noreferrer">FxTS<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 를 사용한다면 아마 다음과 같은 형태로 작성하면 될 것이다.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> pipe<span class="token punctuation">,</span> range<span class="token punctuation">,</span> map<span class="token punctuation">,</span> filter<span class="token punctuation">,</span> concurrent<span class="token punctuation">,</span> take<span class="token punctuation">,</span> each <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@fxts/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> 추가될_과목_정보_배열 <span class="token operator">=</span> <span class="token function">pipe</span><span class="token punctuation">(</span>
  과목_정보_배열<span class="token punctuation">,</span>
  <span class="token function">filter</span><span class="token punctuation">(</span>검색어_필터_함수<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">filter</span><span class="token punctuation">(</span>학년_필터_함수<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">filter</span><span class="token punctuation">(</span>요일_필터_함수<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">filter</span><span class="token punctuation">(</span>시간_필터_함수<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">take</span><span class="token punctuation">(</span>페이지_크기<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">concurrent</span><span class="token punctuation">(</span>페이지_크기<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>시작될 key값이 필요하기 때문에 초기 데이터에 대한 정제가 더 필요할 것 같다.</p><h3 id="vite에서-프로젝트-외부-데이터-접근" tabindex="-1"><a class="header-anchor" href="#vite에서-프로젝트-외부-데이터-접근" aria-hidden="true">#</a> Vite에서 프로젝트 외부 데이터 접근</h3><p><img src="/TIL/assets/16.046e1f0a.jpg" alt="16"></p><p>이 프로젝트의 github repository 구조는 위와 같다.</p><p>이를 보여주는 이유는, <code>/.packages/dku-schedule-client/src/*/**</code> 에서 <code>/data/*/**</code>에 대한 접근이 필요하기 때문이다.</p><p>vite는 기본적으로 브라우저 모듈 방식으로 파일 시스템을 가져오기 때문에, 프로젝트 외부에 있는 파일에 접근하기 위해선 별도의 설정이 필요하다.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vite&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">&quot;@vitejs/plugin-vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> path <span class="token keyword">from</span> <span class="token string">&quot;path&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// https://vitejs.dev/config/</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    alias<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// alias를 이용해서 /data 폴더에 접근시 uri를 변경해준다.</span>
      <span class="token string-property property">&quot;/data&quot;</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;../../data&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;@&quot;</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  server<span class="token operator">:</span> <span class="token punctuation">{</span>
    fs<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 프로젝트 외부 접근을 허용한다.</span>
      allow<span class="token operator">:</span> <span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;../../&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  base<span class="token operator">:</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span>
  build<span class="token operator">:</span> <span class="token punctuation">{</span>
    outDir<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;../../.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>tsconfig에서도 alias 설정이 필요하다.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;useDefineForClassFields&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;moduleResolution&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;strict&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;jsx&quot;</span><span class="token operator">:</span> <span class="token string">&quot;preserve&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;sourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;resolveJsonModule&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;esModuleInterop&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;lib&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dom&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;types&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;element-plus/global&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;@types/node&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;/data/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;../../data/*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;@/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./src/*&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/**/*.ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;src/**/*.d.ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;src/**/*.tsx&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;src/**/*.vue&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>코드에서는 다음과 같이 dynamic import를 이용해서 json 파일을 가져온다.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">_fetchData</span> <span class="token punctuation">(</span>
  path<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Lecture<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// production 모드일 때는 fetch api를 이용하여 json 파일을 가져온다.</span>
  <span class="token comment">// dynamic import로 json을 가져올 경우 content-type 관련 오류가 발생하기 때문이다.</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PROD</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 개발 모드일 때만 dynamic import를 사용한다.</span>
  <span class="token comment">// 지금 생각해보니 proxy 설정을 사용해도 됐을듯.</span>
  <span class="token keyword">return</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* @vite-ignore */</span>path<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>v <span class="token operator">=&gt;</span> v<span class="token punctuation">.</span>default <span class="token keyword">as</span> Lecture<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><div class="highlight-line"> </div><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>dev 모드일 때와 prod 모드일 때 사용하는 코드를 다르게 한다. 자세한 내용은 주석 참고</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getSchedules</span><span class="token punctuation">(</span>
  payload<span class="token operator">:</span> SchedulePayload
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Lecture<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">getDataPath</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>cache<span class="token punctuation">[</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    cache<span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">_fetchData</span><span class="token punctuation">(</span><span class="token function">getDataPath</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> cache<span class="token punctuation">[</span>path<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getAllSchedules</span><span class="token punctuation">(</span>
  year <span class="token operator">=</span> <span class="token number">2022</span><span class="token punctuation">,</span>
  semester <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Lecture<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> results <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token function">getSchedules</span><span class="token punctuation">(</span><span class="token punctuation">{</span> year<span class="token punctuation">,</span> semester<span class="token punctuation">,</span> lectureType<span class="token operator">:</span> LectureType<span class="token punctuation">.</span><span class="token constant">MAJOR</span><span class="token punctuation">,</span> campusType<span class="token operator">:</span> CampusType<span class="token punctuation">.</span><span class="token constant">JUKJEON</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">getSchedules</span><span class="token punctuation">(</span><span class="token punctuation">{</span> year<span class="token punctuation">,</span> semester<span class="token punctuation">,</span> lectureType<span class="token operator">:</span> LectureType<span class="token punctuation">.</span><span class="token constant">MAJOR</span><span class="token punctuation">,</span> campusType<span class="token operator">:</span> CampusType<span class="token punctuation">.</span><span class="token constant">CHEONAN</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">getSchedules</span><span class="token punctuation">(</span><span class="token punctuation">{</span> year<span class="token punctuation">,</span> semester<span class="token punctuation">,</span> lectureType<span class="token operator">:</span> LectureType<span class="token punctuation">.</span><span class="token constant">LIBERAL_ARTS</span><span class="token punctuation">,</span> campusType<span class="token operator">:</span> CampusType<span class="token punctuation">.</span><span class="token constant">JUKJEON</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">getSchedules</span><span class="token punctuation">(</span><span class="token punctuation">{</span> year<span class="token punctuation">,</span> semester<span class="token punctuation">,</span> lectureType<span class="token operator">:</span> LectureType<span class="token punctuation">.</span><span class="token constant">LIBERAL_ARTS</span><span class="token punctuation">,</span> campusType<span class="token operator">:</span> CampusType<span class="token punctuation">.</span><span class="token constant">CHEONAN</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> results<span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>v <span class="token operator">=&gt;</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>이렇게 한 번에 한 학기에 대한 과목 정보를 가져올 수 있도록 했다.</p><h3 id="배포" tabindex="-1"><a class="header-anchor" href="#배포" aria-hidden="true">#</a> 배포</h3><p>배포는 별거 없다. 그냥 github pages를 사용하고, 빌드 후에 push하면 된다.</p><p><img src="/TIL/assets/17.3bead7d7.jpg" alt="17"></p><p>위의 사진 처럼, 그냥 master branch를 기준으로 github pages가 생성되도록 한다.</p><p>그리고 작성된 코드를 build후에 push하면 deploy가 실행된다.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># client 패키지 폴더로 이동한다.</span>
<span class="token operator">&gt;</span> <span class="token builtin class-name">cd</span> /.packages/dku-schedule-client

<span class="token comment"># 빌드 실행</span>
<span class="token operator">&gt;</span> <span class="token function">yarn</span> build

<span class="token comment"># root로 이동 후 git push</span>
<span class="token operator">&gt;</span> <span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>/<span class="token punctuation">..</span>
<span class="token operator">&gt;</span> <span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token operator">&gt;</span> <span class="token function">git</span> commit -m <span class="token string">&quot;build&quot;</span>
<span class="token operator">&gt;</span> <span class="token function">git</span> push
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/TIL/assets/18.4dde4843.jpg" alt="18"></p><p>결과적으로 다음과 같은 프로세스를 가지게 된다.</p><ul><li>github action이 1시간 마다 실행</li><li>시간표 데이터 저장 후 commit, push</li><li>push가 되면, 자동으로 github pages deploy</li><li>신규 시간표 데이터 반영</li></ul><p><img src="/TIL/assets/19.8d7c9c48.jpg" alt="19"></p><p>위에 보이는 것 처럼 Schedule이 실행 된 후에 바로 github pages가 deploy 되는 것을 확인할 수 있다.</p><h2 id="_4-홍보" tabindex="-1"><a class="header-anchor" href="#_4-홍보" aria-hidden="true">#</a> 4. 홍보</h2><p>서비스가 완성된 다음에 에브리타임에 홍보했다.</p><p><img src="/TIL/assets/20.c4afb3a0.jpg" alt="20"></p><p><img src="/TIL/assets/21.e658d8b2.jpg" alt="21"></p><p>약간의 어그로를 위해서(?) 모시고 있는 주인님 사진을 같이 첨부했다.</p><p><img src="/TIL/assets/22.3946959a.jpg" alt="22"> <img src="/TIL/assets/23.47ee6764.jpg" alt="23"> <img src="/TIL/assets/24.2cc1c03e.jpg" alt="24"> <img src="/TIL/assets/25.d4956009.jpg" alt="25"></p><p>예상대로, 고양이 사진 더 올려달라는 댓글이 많이 달렸다. <s>정확히는 그런 댓글만 달렸다.</s></p><p><img src="/TIL/assets/26.c68c869a.jpg" alt="26"></p><p>문제는, 아직 시간표가 공개되기 전이라서 사실 저 타이밍에 홍보해봤자 소용이 없었다는 점..</p><p>그래서 시간표가 공개된 다음에 다시 홍보했다.</p><p><img src="/TIL/assets/27.499950e2.jpg" alt="27"></p><p><s>추천수의 차이는.. 아마도 고양이 사진 때문인듯</s></p><h2 id="후기" tabindex="-1"><a class="header-anchor" href="#후기" aria-hidden="true">#</a> 후기</h2><ul><li>나중에 고도화 해서 커뮤니티로 발전시키면 재밌을 것 같다.</li><li>근데 귀찮다.</li><li>짧은 기간 동안 몰입해서 만들어서 재밌었다.</li><li>테스트 코드도 작성해볼껄 하는 아쉬움이 있다.</li><li>다음 학기에도 써먹어야지</li></ul><h2 id="기타" tabindex="-1"><a class="header-anchor" href="#기타" aria-hidden="true">#</a> 기타</h2><ul><li>소스코드는 <a href="https://github.com/JunilHwang/dku-schedule-manager" target="_blank" rel="noopener noreferrer">여기<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>에서 확인할 수 있다.</li><li>코드가 좀 더럽다.</li></ul></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><!----></footer><!----><!--[--><!--[--><div></div><!----><!--]--><!--]--></main><!--]--></div><footer class="siteFooter"><div class="container"><p class="siteFooterCopyright"> Copyright © 2019 All Right <em>개발자 황준일</em></p><p class="siteFooterContact"> junil.h@kakao.com . +82-10-5764-4483 . <a href="https://github.com/junilhwang" target="_blank">GitHub</a> . <a href="http://junil-hwang.com" target="_blank">Blog</a> . <a href="https://github.com/junilhwang/TIL/" target="_blank">Repository</a></p></div></footer><!--]--><!----><!--]--></div>
    <script type="module" src="/TIL/assets/app.432c6c8a.js" defer></script>
  </body>
</html>
