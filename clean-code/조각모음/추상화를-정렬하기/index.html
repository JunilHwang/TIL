<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.46">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <meta property="og:title" content="추상화를 정렬하기 | 리액트 클린코드"><meta property="og:description" content="문장이 단어로 단어가 글자로 구성되듯 코드도 적절한 추상화 계층을 만들어 정렬해야 한다."><meta name="keywords" content="javascript clean code, react clean code, 자바스크립트 클린코드, 리액트 클린코드, 프론트엔드 클린코드"><meta property="og:image" content="https://raw.githubusercontent.com/JunilHwang/TIL/refs/heads/master/clean-code/조각모음/thumbnail.webp"><meta property="og:url" content="https://junilhwang.github.io/TIL/clean-code/%EC%A1%B0%EA%B0%81%EB%AA%A8%EC%9D%8C/%EC%B6%94%EC%83%81%ED%99%94%EB%A5%BC-%EC%A0%95%EB%A0%AC%ED%95%98%EA%B8%B0/"><meta property="og:type" content="article"><meta property="og:site_name" content="개발자 황준일"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="추상화를 정렬하기 | 리액트 클린코드"><meta name="twitter:description" content="문장이 단어로 단어가 글자로 구성되듯 코드도 적절한 추상화 계층을 만들어 정렬해야 한다."><meta name="twitter:image" content="https://raw.githubusercontent.com/JunilHwang/TIL/refs/heads/master/clean-code/조각모음/thumbnail.webp"><script async src="https://www.googletagmanager.com/gtag/js?id=G-CJPZ4K06KP"></script><script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-CJPZ4K06KP');

// 링크 클릭 이벤트 추적
document.addEventListener('DOMContentLoaded', function() {
  document.addEventListener('click', function(e) {
    const link = e.target.closest('a');
    if (link && link.href) {
      const isExternal = link.hostname !== window.location.hostname;
      gtag('event', 'click', {
        event_category: 'link',
        event_label: link.href,
        value: isExternal ? 'external' : 'internal'
      });
    }
  });
});
</script><meta name="google-site-verification" content="sHfBWIoCUOYFXJ3b0ulN8jp9jpD8SEW5Wpxvlk-UABA"><link rel="apple-touch-icon" sizes="180x180" href="/TIL/assets/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/TIL/assets/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/TIL/assets/favicons/favicon-16x16.png"><link rel="manifest" href="/TIL/manifest.webmanifest"><link rel="mask-icon" href="/TIL/assets/favicons/safari-pinned-tab.svg" color="#3a0839"><link rel="shortcut icon" href="/TIL/assets/favicons/favicon.ico"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Serif+KR&display=swap"><meta name="msapplication-TileColor" content="#3a0839"><meta name="msapplication-config" content="/TIL/browserconfig.xml"><meta name="theme-color" content="#ffffff"><title>추상화를 정렬하기 | 리액트 클린코드 | 개발자 황준일</title><meta name="description" content="문장이 단어로 단어가 글자로 구성되듯 코드도 적절한 추상화 계층을 만들어 정렬해야 한다.">
    <link rel="modulepreload" href="/TIL/assets/app.045bf462.js"><link rel="modulepreload" href="/TIL/assets/index.html.b4a76f1d.js"><link rel="modulepreload" href="/TIL/assets/index.html.0da49f71.js"><link rel="prefetch" href="/TIL/assets/index.html.301081fd.js"><link rel="prefetch" href="/TIL/assets/index.html.d702f3c4.js"><link rel="prefetch" href="/TIL/assets/index.html.6fece23c.js"><link rel="prefetch" href="/TIL/assets/index.html.8000baf5.js"><link rel="prefetch" href="/TIL/assets/index.html.fe416c5e.js"><link rel="prefetch" href="/TIL/assets/index.html.f06d746a.js"><link rel="prefetch" href="/TIL/assets/index.html.5f3109d0.js"><link rel="prefetch" href="/TIL/assets/index.html.7c463901.js"><link rel="prefetch" href="/TIL/assets/index.html.2bee66a0.js"><link rel="prefetch" href="/TIL/assets/index.html.e5126e47.js"><link rel="prefetch" href="/TIL/assets/index.html.7643dd2e.js"><link rel="prefetch" href="/TIL/assets/index.html.5937e670.js"><link rel="prefetch" href="/TIL/assets/index.html.a4f9fb64.js"><link rel="prefetch" href="/TIL/assets/index.html.c3d47cc2.js"><link rel="prefetch" href="/TIL/assets/index.html.a64cc245.js"><link rel="prefetch" href="/TIL/assets/index.html.c3e4103b.js"><link rel="prefetch" href="/TIL/assets/index.html.89edfe16.js"><link rel="prefetch" href="/TIL/assets/index.html.aadc7986.js"><link rel="prefetch" href="/TIL/assets/index.html.6f5c22a5.js"><link rel="prefetch" href="/TIL/assets/index.html.704a199b.js"><link rel="prefetch" href="/TIL/assets/index.html.ba2b92ae.js"><link rel="prefetch" href="/TIL/assets/index.html.5572e983.js"><link rel="prefetch" href="/TIL/assets/index.html.2dfe5022.js"><link rel="prefetch" href="/TIL/assets/index.html.2d777636.js"><link rel="prefetch" href="/TIL/assets/index.html.85b791d5.js"><link rel="prefetch" href="/TIL/assets/index.html.ad61914d.js"><link rel="prefetch" href="/TIL/assets/index.html.665688ab.js"><link rel="prefetch" href="/TIL/assets/index.html.63c0b238.js"><link rel="prefetch" href="/TIL/assets/index.html.6a47a1e5.js"><link rel="prefetch" href="/TIL/assets/index.html.f5036061.js"><link rel="prefetch" href="/TIL/assets/index.html.a08993e9.js"><link rel="prefetch" href="/TIL/assets/index.html.5111dbf4.js"><link rel="prefetch" href="/TIL/assets/index.html.38416899.js"><link rel="prefetch" href="/TIL/assets/index.html.805752b0.js"><link rel="prefetch" href="/TIL/assets/index.html.ffc27226.js"><link rel="prefetch" href="/TIL/assets/index.html.0f6e5945.js"><link rel="prefetch" href="/TIL/assets/index.html.304b915a.js"><link rel="prefetch" href="/TIL/assets/index.html.5a07f71f.js"><link rel="prefetch" href="/TIL/assets/index.html.32f536f0.js"><link rel="prefetch" href="/TIL/assets/index.html.496b204e.js"><link rel="prefetch" href="/TIL/assets/index.html.836d08fb.js"><link rel="prefetch" href="/TIL/assets/index.html.dfea0144.js"><link rel="prefetch" href="/TIL/assets/index.html.3283ea2c.js"><link rel="prefetch" href="/TIL/assets/index.html.ed42b735.js"><link rel="prefetch" href="/TIL/assets/index.html.1414aea5.js"><link rel="prefetch" href="/TIL/assets/index.html.32ecabf7.js"><link rel="prefetch" href="/TIL/assets/index.html.6062b538.js"><link rel="prefetch" href="/TIL/assets/index.html.4b220b34.js"><link rel="prefetch" href="/TIL/assets/index.html.d243d8a0.js"><link rel="prefetch" href="/TIL/assets/index.html.0e31b667.js"><link rel="prefetch" href="/TIL/assets/index.html.b5c18615.js"><link rel="prefetch" href="/TIL/assets/index.html.3dd2e8f4.js"><link rel="prefetch" href="/TIL/assets/index.html.39f51dfa.js"><link rel="prefetch" href="/TIL/assets/index.html.860fad0f.js"><link rel="prefetch" href="/TIL/assets/index.html.fea6d597.js"><link rel="prefetch" href="/TIL/assets/index.html.9ce00294.js"><link rel="prefetch" href="/TIL/assets/index.html.4520d3de.js"><link rel="prefetch" href="/TIL/assets/index.html.474578b6.js"><link rel="prefetch" href="/TIL/assets/index.html.e6b8dfc0.js"><link rel="prefetch" href="/TIL/assets/index.html.a89d6ba6.js"><link rel="prefetch" href="/TIL/assets/index.html.caa06567.js"><link rel="prefetch" href="/TIL/assets/index.html.7f14b89b.js"><link rel="prefetch" href="/TIL/assets/index.html.6b7094a1.js"><link rel="prefetch" href="/TIL/assets/index.html.fffb38df.js"><link rel="prefetch" href="/TIL/assets/index.html.89537d77.js"><link rel="prefetch" href="/TIL/assets/index.html.5958b4ac.js"><link rel="prefetch" href="/TIL/assets/index.html.73712132.js"><link rel="prefetch" href="/TIL/assets/index.html.e827e222.js"><link rel="prefetch" href="/TIL/assets/index.html.0484dea2.js"><link rel="prefetch" href="/TIL/assets/404.html.0f07aaf0.js"><link rel="prefetch" href="/TIL/assets/index.html.83fb0c5a.js"><link rel="prefetch" href="/TIL/assets/index.html.57fda979.js"><link rel="prefetch" href="/TIL/assets/index.html.55979edf.js"><link rel="prefetch" href="/TIL/assets/index.html.6a1cc1c7.js"><link rel="prefetch" href="/TIL/assets/index.html.c55f43dd.js"><link rel="prefetch" href="/TIL/assets/index.html.5f64fecd.js"><link rel="prefetch" href="/TIL/assets/index.html.03cafc50.js"><link rel="prefetch" href="/TIL/assets/index.html.0288ca4a.js"><link rel="prefetch" href="/TIL/assets/index.html.9350d6fc.js"><link rel="prefetch" href="/TIL/assets/index.html.cd8f644b.js"><link rel="prefetch" href="/TIL/assets/index.html.577f0182.js"><link rel="prefetch" href="/TIL/assets/index.html.ee99789f.js"><link rel="prefetch" href="/TIL/assets/index.html.9cbe9d73.js"><link rel="prefetch" href="/TIL/assets/index.html.15c4c3a0.js"><link rel="prefetch" href="/TIL/assets/index.html.01ee4bf0.js"><link rel="prefetch" href="/TIL/assets/index.html.01f2a884.js"><link rel="prefetch" href="/TIL/assets/index.html.0a8df30c.js"><link rel="prefetch" href="/TIL/assets/index.html.d2d41c79.js"><link rel="prefetch" href="/TIL/assets/index.html.83ec799e.js"><link rel="prefetch" href="/TIL/assets/index.html.afac0df8.js"><link rel="prefetch" href="/TIL/assets/index.html.cf2918b9.js"><link rel="prefetch" href="/TIL/assets/index.html.09390bfa.js"><link rel="prefetch" href="/TIL/assets/index.html.426c5cc7.js"><link rel="prefetch" href="/TIL/assets/index.html.db794932.js"><link rel="prefetch" href="/TIL/assets/index.html.4e6fed55.js"><link rel="prefetch" href="/TIL/assets/index.html.1559d708.js"><link rel="prefetch" href="/TIL/assets/index.html.64aa8a3c.js"><link rel="prefetch" href="/TIL/assets/index.html.70ed8565.js"><link rel="prefetch" href="/TIL/assets/index.html.321483a9.js"><link rel="prefetch" href="/TIL/assets/index.html.02fcbc59.js"><link rel="prefetch" href="/TIL/assets/index.html.7b9611c1.js"><link rel="prefetch" href="/TIL/assets/index.html.eb43d25c.js"><link rel="prefetch" href="/TIL/assets/index.html.b5587858.js"><link rel="prefetch" href="/TIL/assets/index.html.889ec123.js"><link rel="prefetch" href="/TIL/assets/index.html.1c91455f.js"><link rel="prefetch" href="/TIL/assets/index.html.2a907154.js"><link rel="prefetch" href="/TIL/assets/index.html.e41fd7d2.js"><link rel="prefetch" href="/TIL/assets/index.html.752fbf40.js"><link rel="prefetch" href="/TIL/assets/index.html.1f513747.js"><link rel="prefetch" href="/TIL/assets/index.html.53385597.js"><link rel="prefetch" href="/TIL/assets/index.html.f6b218db.js"><link rel="prefetch" href="/TIL/assets/index.html.bc7dbe8b.js"><link rel="prefetch" href="/TIL/assets/index.html.c443c197.js"><link rel="prefetch" href="/TIL/assets/index.html.2288afbb.js"><link rel="prefetch" href="/TIL/assets/index.html.a7a906f9.js"><link rel="prefetch" href="/TIL/assets/index.html.929084b9.js"><link rel="prefetch" href="/TIL/assets/index.html.3d17b0e6.js"><link rel="prefetch" href="/TIL/assets/index.html.23abaa02.js"><link rel="prefetch" href="/TIL/assets/index.html.e17840ef.js"><link rel="prefetch" href="/TIL/assets/index.html.433ff656.js"><link rel="prefetch" href="/TIL/assets/index.html.a9cb8bbd.js"><link rel="prefetch" href="/TIL/assets/index.html.429d6cfa.js"><link rel="prefetch" href="/TIL/assets/index.html.f97b2bc9.js"><link rel="prefetch" href="/TIL/assets/index.html.dfa96c54.js"><link rel="prefetch" href="/TIL/assets/index.html.cab8a7a0.js"><link rel="prefetch" href="/TIL/assets/index.html.736178ee.js"><link rel="prefetch" href="/TIL/assets/index.html.7cc04ab7.js"><link rel="prefetch" href="/TIL/assets/index.html.0d02e592.js"><link rel="prefetch" href="/TIL/assets/index.html.b1871c5b.js"><link rel="prefetch" href="/TIL/assets/index.html.b5e49def.js"><link rel="prefetch" href="/TIL/assets/index.html.d3da0c1a.js"><link rel="prefetch" href="/TIL/assets/index.html.a6d637da.js"><link rel="prefetch" href="/TIL/assets/index.html.04c1df97.js"><link rel="prefetch" href="/TIL/assets/index.html.84251edb.js"><link rel="prefetch" href="/TIL/assets/index.html.111f22cd.js"><link rel="prefetch" href="/TIL/assets/index.html.1ba21af0.js"><link rel="prefetch" href="/TIL/assets/index.html.94c9c86c.js"><link rel="prefetch" href="/TIL/assets/index.html.0ec7fd70.js"><link rel="prefetch" href="/TIL/assets/index.html.a7e233cb.js"><link rel="prefetch" href="/TIL/assets/404.html.df2e6e51.js"><link rel="prefetch" href="/TIL/assets/404.3c3d3d9e.js"><link rel="prefetch" href="/TIL/assets/Layout.5b200766.js">
    <link rel="stylesheet" href="/TIL/assets/style.0059aaed.css">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/TIL/" class=""><img class="logo" src="https://avatars1.githubusercontent.com/u/18749057?s=460&amp;v=4" alt="개발자 황준일"><span class="site-name can-hide">개발자 황준일</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/TIL/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><a href="/TIL/About/" class="" aria-label="About"><!--[--><!--]--> About <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/TIL/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><a href="/TIL/About/" class="" aria-label="About"><!--[--><!--]--> About <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">추상화를 정렬하기 | 리액트 클린코드 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/TIL/clean-code/%EC%A1%B0%EA%B0%81%EB%AA%A8%EC%9D%8C/%EC%B6%94%EC%83%81%ED%99%94%EB%A5%BC-%EC%A0%95%EB%A0%AC%ED%95%98%EA%B8%B0/#_1-한글로-생각해보는-추상화-수준" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. 한글로 생각해보는 &quot;추상화 수준&quot;"><!--[--><!--]--> 1. 한글로 생각해보는 &quot;추상화 수준&quot; <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/TIL/clean-code/%EC%A1%B0%EA%B0%81%EB%AA%A8%EC%9D%8C/%EC%B6%94%EC%83%81%ED%99%94%EB%A5%BC-%EC%A0%95%EB%A0%AC%ED%95%98%EA%B8%B0/#_2-문제가-되는-코드" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. 문제가 되는 코드"><!--[--><!--]--> 2. 문제가 되는 코드 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/TIL/clean-code/%EC%A1%B0%EA%B0%81%EB%AA%A8%EC%9D%8C/%EC%B6%94%EC%83%81%ED%99%94%EB%A5%BC-%EC%A0%95%EB%A0%AC%ED%95%98%EA%B8%B0/#_3-개선된-모습" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. 개선된 모습"><!--[--><!--]--> 3. 개선된 모습 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/TIL/clean-code/%EC%A1%B0%EA%B0%81%EB%AA%A8%EC%9D%8C/%EC%B6%94%EC%83%81%ED%99%94%EB%A5%BC-%EC%A0%95%EB%A0%AC%ED%95%98%EA%B8%B0/#정렬된-추상화-레벨과-조합" class="router-link-active router-link-exact-active sidebar-item" aria-label="정렬된 추상화 레벨과 조합"><!--[--><!--]--> 정렬된 추상화 레벨과 조합 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/TIL/clean-code/%EC%A1%B0%EA%B0%81%EB%AA%A8%EC%9D%8C/%EC%B6%94%EC%83%81%ED%99%94%EB%A5%BC-%EC%A0%95%EB%A0%AC%ED%95%98%EA%B8%B0/#step-1-level-1-원자적-훅들-각각-하나의-명확한-책임" class="router-link-active router-link-exact-active sidebar-item" aria-label="Step 1) Level 1 - 원자적 훅들 (각각 하나의 명확한 책임)"><!--[--><!--]--> Step 1) Level 1 - 원자적 훅들 (각각 하나의 명확한 책임) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/TIL/clean-code/%EC%A1%B0%EA%B0%81%EB%AA%A8%EC%9D%8C/%EC%B6%94%EC%83%81%ED%99%94%EB%A5%BC-%EC%A0%95%EB%A0%AC%ED%95%98%EA%B8%B0/#step-2-level-2-조합-훅들-level-1-훅들의-조합" class="router-link-active router-link-exact-active sidebar-item" aria-label="Step 2) Level 2 - 조합 훅들 (Level 1 훅들의 조합)"><!--[--><!--]--> Step 2) Level 2 - 조합 훅들 (Level 1 훅들의 조합) <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/TIL/clean-code/%EC%A1%B0%EA%B0%81%EB%AA%A8%EC%9D%8C/%EC%B6%94%EC%83%81%ED%99%94%EB%A5%BC-%EC%A0%95%EB%A0%AC%ED%95%98%EA%B8%B0/#_4-추상화-정렬의-핵심-원칙" class="router-link-active router-link-exact-active sidebar-item" aria-label="4. 추상화 정렬의 핵심 원칙"><!--[--><!--]--> 4. 추상화 정렬의 핵심 원칙 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/TIL/clean-code/%EC%A1%B0%EA%B0%81%EB%AA%A8%EC%9D%8C/%EC%B6%94%EC%83%81%ED%99%94%EB%A5%BC-%EC%A0%95%EB%A0%AC%ED%95%98%EA%B8%B0/#_1-같은-레벨끼리만-조합하자" class="router-link-active router-link-exact-active sidebar-item" aria-label="(1) 같은 레벨끼리만 조합하자"><!--[--><!--]--> (1) 같은 레벨끼리만 조합하자 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/TIL/clean-code/%EC%A1%B0%EA%B0%81%EB%AA%A8%EC%9D%8C/%EC%B6%94%EC%83%81%ED%99%94%EB%A5%BC-%EC%A0%95%EB%A0%AC%ED%95%98%EA%B8%B0/#_2-각-훅의-명확한-단일-책임" class="router-link-active router-link-exact-active sidebar-item" aria-label="(2) 각 훅의 명확한 단일 책임"><!--[--><!--]--> (2) 각 훅의 명확한 단일 책임 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/TIL/clean-code/%EC%A1%B0%EA%B0%81%EB%AA%A8%EC%9D%8C/%EC%B6%94%EC%83%81%ED%99%94%EB%A5%BC-%EC%A0%95%EB%A0%AC%ED%95%98%EA%B8%B0/#_3-조합을-통한-확장성" class="router-link-active router-link-exact-active sidebar-item" aria-label="(3) 조합을 통한 확장성"><!--[--><!--]--> (3) 조합을 통한 확장성 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/TIL/clean-code/%EC%A1%B0%EA%B0%81%EB%AA%A8%EC%9D%8C/%EC%B6%94%EC%83%81%ED%99%94%EB%A5%BC-%EC%A0%95%EB%A0%AC%ED%95%98%EA%B8%B0/#마무리" class="router-link-active router-link-exact-active sidebar-item" aria-label="마무리"><!--[--><!--]--> 마무리 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="클린코드-조각모음-추상화를-정렬하기" tabindex="-1"><a class="header-anchor" href="#클린코드-조각모음-추상화를-정렬하기" aria-hidden="true">#</a> [클린코드 조각모음] 추상화를 정렬하기</h1><blockquote><p>이 글은 <strong>React</strong>와 <strong>JavaScript</strong>를 사용한 <strong>프론트엔드 개발</strong>에서 <strong>클린코드</strong>를 작성하기 위한 실용적인 가이드입니다. 특히 함수와 훅을 이용하여 <strong>추상화 수준</strong>을 정렬하는 방법에 중점을 두고 있습니다.</p></blockquote><p><img src="https://raw.githubusercontent.com/JunilHwang/TIL/refs/heads/master/clean-code/조각모음/thumbnail.webp" alt="클린코드 조각모음"></p><div class="custom-container tip"><p class="custom-container-title">좋은 코드는 한 편의 글과 같다.</p><p>문단은 문장으로, 문장은 단어로, 단어는 글자로 구성되듯이, 코드도 동일한 추상화 레벨이 모여 더 높은 차원의 추상화를 만들어야 한다.</p></div><h2 id="_1-한글로-생각해보는-추상화-수준" tabindex="-1"><a class="header-anchor" href="#_1-한글로-생각해보는-추상화-수준" aria-hidden="true">#</a> 1. 한글로 생각해보는 &quot;추상화 수준&quot;</h2><p>한글은 기본 요소는 “자음”과 “모음”이다.</p><p>자음과 모음이 모여서 글자가 되고, 글자가 모여 단어가 되고, 단어가 모여 문장이 된다.</p><p>가령, &quot;안녕하세요 황준일입니다&quot;라는 문장은 이렇게 구성이 된다.</p><img src="https://www.plantuml.com/plantuml/svg/TLDBJiCm4Dtx52Phw05OSHDaWg68DguI0mj0AY81H14WqI10QKKHvQTA5Df25cN3LTZ5xXqOkqa8KHifayJlpNiputZ1uSJc6-KIck55MgQuKY9h5a8LOgwJLOgDaHz4OHNBZxhStnjTrt7KSsKuCF0smXYhsomHny66R9xBnidtftXvWgU1YODDPZdC8XPVt6HRj3HEWUl7Evo5S0R1xIV1ysSJu5IZXK8XvH-fbOkKsahVDFLAPyRytLnTK3sKDgwdI6nYScgdbKWVb8Mo7lcW8jqGmaqzGM-hW1xN0Rr-1k0UFcLZ2A7f0L1JkRNxIQQYzYGl-zfqYzdBMJzm0ozm-kUJk817uW3wqzGxeMosjRf3BKujaqvpACJYVzgfScvQkRtQsPcROzkPaSt35hUw8__PqFHqFIRgDe4JlQSSlHJ3QPsACkX8zyr0kmXPZ5DihwqMEMOhMP8S1FBEaxTxCXYALW1ZlnAleMWFeHzNr3hGeEfApJbmSp9nAUBC4mzVIg8HPlAZRbK-kjhWu6IoGBPfqGtWTrPPuhWDXs5IuXBZd9LrPcwAytXyVi0UHs5Nz48yxbxzPI23q0Arbk7u_G80" alt="uml diagram"><p>그럼 이 규칙이 깨지면 어떤 모습일까?</p><p><strong>“안녕하세요ㅈㅓㄴㅡㄴㅎㅘㅇ준일ㅇㅣㅂ니다”</strong> 이라는 추상화 규칙이 깨진 문장을 파헤쳐보면 다음과 같다.</p><img src="https://www.plantuml.com/plantuml/svg/TPF1RjD048Rl-nH3JurG3z0RKb0Vf1VJM6hKn8vSK_LKER0B0OUs4ZOqA8uIMaY2E5WYjAu45rx5Dy_u7Jh9EeqCuU9Txyxt-vz_v9r3rt3Svys6UE3kcqqJMWsZRWdHujFwNhrbM2viu9cYmVa668VWc4RDTChND0pfPHlmUqA3BxlM9eKTL64UNf1Cw5DGMO2MxJIDHXdCRYSqbYimLPrKlK_bB5MZnVCqLHUfUarN7aM_U9EgorIzGB-3_fMMVURO1oRxhLP1sw1Xcw84AFgT9J5Kgq8xXgsdXGLuihmaluzdKXXxRlt8SCsbnQ9iYuc2PUBh6wvcC24_chVuyHnbXyOUF3gkY9hvjyR2ptN0Vl9UaCKU5AskiwLR-B-jPOiDssv15hU1Pq5HzyyDVflmYZyaZlgYK2dfbUe0hoN9ICSC3u6JXdbeNaMOLasi4yWIZpM0Hd4UJkTT3pq6yMsWGTvKrc7eJ-Z33F9mfh-dIo7lJVKWQQ2A4TxJfQn_zkcpAd2WdiJBRYdonoVRvT2N2LaslzX7hB8I-sS87avdknPhO1m3lWi0nwSKUR3IfrTTZao87Sw5_umx" alt="uml diagram"><ul><li>“안녕하세요” → 처음에는 매끄럽게 잘 읽힌다.</li><li>“ㅈㅓㄴㅡㄴㅎㅘㅇ준일ㅇㅣㅂ니다” → <strong>한 글자씩 곱씹어보면서 자음 모음을 조합하여 어떤 단어인지 유추</strong>한다</li><li>“저는 황준일입니다” 라고 해석이 완료되었을 때, “안녕하세요”를 합쳐서 전체적인 한 문장으로 해석할 수 있다.</li></ul><p>추상화가 잘 되어있는 기존의 문장은 한글이 숙련된 사람들에게 굉장히 잘 읽힌다.</p><p>그런데 이제 <strong>추상화 수준이 깨지면 이를 해석하기 위해 잘 쓰여진 문장보다 2~3배의 에너지</strong>를 더 써야한다.</p><p>이건 <strong>코드를 작성할 때에도 마주할 수 있는 문제</strong>라고 생각한다.</p><h2 id="_2-문제가-되는-코드" tabindex="-1"><a class="header-anchor" href="#_2-문제가-되는-코드" aria-hidden="true">#</a> 2. 문제가 되는 코드</h2><p>React에서 무한 스크롤을 구현하는 커스텀 훅을 살펴보자.</p><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token comment">// useThemeInfiniteScroll.ts - 문제가 있는 코드</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useThemeInfiniteScroll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  themeId<span class="token punctuation">,</span>
  initialCursor <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  threshold <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token operator">:</span> ThemeInfiniteScrollOptions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  
  <span class="token comment">// Level 1: 기본 훅과 상태 관리</span>
  <span class="token keyword">const</span> observerRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>HTMLDivElement <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>products<span class="token punctuation">,</span> setProducts<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span>Product<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>cursor<span class="token punctuation">,</span> setCursor<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>initialCursor<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>moreAvailable<span class="token punctuation">,</span> setMoreAvailable<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>loading<span class="token punctuation">,</span> setLoading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>error<span class="token punctuation">,</span> setError<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Level 2: API 호출 훅</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> initialData <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useSuspenseApiQuery</span><span class="token generic class-name"><span class="token operator">&lt;</span>ThemeProductResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">API_ENDPOINTS</span><span class="token punctuation">.</span><span class="token constant">THEME_PRODUCTS</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>themeId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    queryKey<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;theme-products&quot;</span><span class="token punctuation">,</span> themeId<span class="token punctuation">,</span> <span class="token string">&quot;initial&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Level 2: API 호출 훅</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>
    isLoading<span class="token operator">:</span> queryLoading<span class="token punctuation">,</span>
    error<span class="token operator">:</span> queryError<span class="token punctuation">,</span>
    refetch<span class="token punctuation">,</span>
  <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useApiQuery</span><span class="token generic class-name"><span class="token operator">&lt;</span>ThemeProductResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">API_ENDPOINTS</span><span class="token punctuation">.</span><span class="token constant">THEME_PRODUCTS</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>themeId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>cursor <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">?cursor=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>cursor<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    queryKey<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;theme-products&quot;</span><span class="token punctuation">,</span> themeId<span class="token punctuation">,</span> cursor<span class="token punctuation">]</span><span class="token punctuation">,</span>
    enabled<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// level 1: 초기 데이터 설정</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>initialData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token function">setProducts</span><span class="token punctuation">(</span>initialData<span class="token punctuation">.</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token function">setCursor</span><span class="token punctuation">(</span>initialData<span class="token punctuation">.</span>cursor <span class="token operator">??</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token function">setMoreAvailable</span><span class="token punctuation">(</span>
         initialData<span class="token punctuation">.</span>hasMoreList <span class="token operator">!==</span> <span class="token boolean">false</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token operator">!</span>initialData<span class="token punctuation">.</span>list<span class="token punctuation">.</span>length
       <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>initialData<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// Level 1: 복잡한 페이징 로직과 에러처리</span>
  <span class="token keyword">const</span> fetchNext <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span>
   <span class="token keyword">async</span> <span class="token punctuation">(</span>entries<span class="token operator">:</span> IntersectionObserverEntry<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>moreAvailable <span class="token operator">||</span> loading<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setError</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
         <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">refetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">const</span> res <span class="token operator">=</span> result<span class="token punctuation">.</span>data <span class="token keyword">as</span> ThemeProductResponse<span class="token punctuation">;</span>
         <span class="token function">setProducts</span><span class="token punctuation">(</span><span class="token punctuation">(</span>prev<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> existingIds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>prev<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> filtered <span class="token operator">=</span> res<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>existingIds<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span>prev<span class="token punctuation">,</span> <span class="token operator">...</span>filtered<span class="token punctuation">]</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token function">setCursor</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>cursor <span class="token operator">??</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token function">setMoreAvailable</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>hasMoreList <span class="token operator">!==</span> <span class="token boolean">false</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token operator">!</span>res<span class="token punctuation">.</span>list<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token function">setError</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
         <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">[</span>refetch<span class="token punctuation">,</span> moreAvailable<span class="token punctuation">,</span> loading<span class="token punctuation">]</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// Level 2: Intersection Observer 훅</span>
  <span class="token function">useIntersectionObserver</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    targetRef<span class="token operator">:</span> observerRef<span class="token punctuation">,</span>
    onIntersect<span class="token operator">:</span> fetchNext<span class="token punctuation">,</span>
    enabled<span class="token operator">:</span> moreAvailable <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>loading <span class="token operator">&amp;&amp;</span> products<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">,</span>
    threshold<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    products<span class="token punctuation">,</span>
    loading<span class="token operator">:</span> loading <span class="token operator">||</span> queryLoading<span class="token punctuation">,</span>
    moreAvailable<span class="token punctuation">,</span>
    error<span class="token operator">:</span> error <span class="token operator">||</span> queryError<span class="token punctuation">,</span>
    observerRef<span class="token punctuation">,</span>
    fetchNext<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>이 코드는 추상화 수준이 정렬되지 않은 <strong>서로 다른 추상화 레벨로 조합된 코드이다.</strong></p><ul><li>Level 1: <code>useState</code> 등의 기본 훅과 이를 사용하는 복잡한 페이징 로직과 에러처리</li><li>Level 2: <code>useQuery</code>, <code>useIntersectionObserver</code> 등의 커스텀 훅</li><li>Level 3: 1~2를 가져다 사용한 <code>useThemeInfiniteScroll</code> 훅 자체</li></ul><img src="https://www.plantuml.com/plantuml/svg/TL9DIyD04BtlhnZJgnvgRps8u4aGn8-ZbpHkDBZTIB8LH8IsDXXGHB71L69fKQc21w4g5VqtkNKd_y5DgTQFkeVPOVRntfl7phf2TqIfoCY4sAH52jjCjpWX3ZM4pZSO1Ms1xb06MGrq5rZQPo5ZceOwi4S0u1kqvD8LeGiw2QfRfkRWdjCPA-Z6blOBBBlFs6mdGGJ9IOXNJzW9GBOZx5GqiZ_6mVJ8mNJg8FKmpi5IYJgxsj_vF1VKSTN8ilbYmQNE3dN6A-L6IZd86CP_IgjfOlFSjBWbw8hXs8mD28SfJKtDV9BaGLDxOUiCiFg0b_SQ6Uxn4vC4T_sty0j3k2qe56mXxA9wbWyzR4Lvm5gaSW9vT2DlUu0lTJoe98qwe1_YJLab2Mce_MuNBquLk8dDsXgN7HzVGsKZyAKN9468jHvUrcFFZxtpkFOKU-r1FOczCFOE1qJlgeczwzYhoYDVoMdOA4F_iO5NnuJCKhwk_iq7" alt="uml diagram"><p>마치 문장을 쓸 때 &quot;<strong>안녕하세요ㅈㅓㄴㅡㄴㅎㅘㅇ준일ㅇㅣㅂ니다</strong>&quot; 처럼 읽기 어려운 형태의 훅이라고 할 수 있다. 이걸 “안녕하세요 저는 황준일입니다” 로 개선하는 과정이 필요하다.</p><div class="custom-container tip"><p class="custom-container-title">파생되는 문제</p><p>사실 추상화 수준과 관련된 부분 말고도 아래와 같은 잠재적인 문제를 가지고 있다. 추상화 수준이 낮다는 것은 단일 책임 원칙에 위배되는 상황과 맞물릴 수 있다. <strong>현재 useThemeInfiniteScroll 훅은 여러가지 일을 한 번에 수행하고 있다.</strong></p><ul><li>api 호출 데이터를 직접적으로 관리한다.</li><li>api 호출을 직접 수행하고 있다.</li><li>다양한 훅을 조합하고 있다.</li></ul><p>개발 조직을 통해 비유해보자면, 팀장이 팀장의 역할 외의 다양한 잡일(?)을 수행하는 모습이다. <s>사실 인력이 부족하면 이런 일이 발생한다.</s></p><p>신입 개발자를 채용하여(=커스텀훅을 만들어서) 이 문제를 해결 하거나 혹은 다른 개발자(=다른 훅)에게 이 일을 위임할 수 있다.</p></div><h2 id="_3-개선된-모습" tabindex="-1"><a class="header-anchor" href="#_3-개선된-모습" aria-hidden="true">#</a> 3. 개선된 모습</h2><h3 id="정렬된-추상화-레벨과-조합" tabindex="-1"><a class="header-anchor" href="#정렬된-추상화-레벨과-조합" aria-hidden="true">#</a> 정렬된 추상화 레벨과 조합</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Level 2 (각각 명확한 단일 책임):
├── useInitThemeData (초기 데이터 fetching)
├── useInitNextThemeData (다음 페이지 데이터 쿼리)
└── useThemeData (테마 데이터 상태 관리)

Level 3 (Level 2 훅들의 조합):
└── useThemeInfiniteScroll (훅들을 조합하여 완전한 기능 제공)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="step-1-level-1-원자적-훅들-각각-하나의-명확한-책임" tabindex="-1"><a class="header-anchor" href="#step-1-level-1-원자적-훅들-각각-하나의-명확한-책임" aria-hidden="true">#</a> Step 1) Level 1 - 원자적 훅들 (각각 하나의 명확한 책임)</h3><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token comment">// 2-1. 초기 데이터 fetching만 담당</span>
<span class="token keyword">const</span> <span class="token function-variable function">useInitThemeData</span> <span class="token operator">=</span> <span class="token punctuation">(</span>themeId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token generic-function"><span class="token function">useSuspenseApiQuery</span><span class="token generic class-name"><span class="token operator">&lt;</span>ThemeProductResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">API_ENDPOINTS</span><span class="token punctuation">.</span><span class="token constant">THEME_PRODUCTS</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>themeId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    queryKey<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;theme-products&quot;</span><span class="token punctuation">,</span> themeId<span class="token punctuation">,</span> <span class="token string">&quot;initial&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 2-2. 다음 페이지 데이터 쿼리만 담당</span>
<span class="token keyword">const</span> <span class="token function-variable function">useInitNextThemeData</span> <span class="token operator">=</span> <span class="token punctuation">(</span>themeId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> cursor<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token generic-function"><span class="token function">useApiQuery</span><span class="token generic class-name"><span class="token operator">&lt;</span>ThemeProductResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">API_ENDPOINTS</span><span class="token punctuation">.</span><span class="token constant">THEME_PRODUCTS</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>themeId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>cursor <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">?cursor=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>cursor<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    queryKey<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;theme-products&quot;</span><span class="token punctuation">,</span> themeId<span class="token punctuation">,</span> cursor<span class="token punctuation">]</span><span class="token punctuation">,</span>
    enabled<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 2-3. 테마 데이터 상태 관리만 담당</span>
<span class="token keyword">const</span> useThemeData <span class="token operator">=</span> <span class="token punctuation">(</span>
  initData<span class="token operator">:</span> ReturnType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> useInitThemeData<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  initialCursor<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>products<span class="token punctuation">,</span> setProducts<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span>Product<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>cursor<span class="token punctuation">,</span> setCursor<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>initialCursor<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>moreAvailable<span class="token punctuation">,</span> setMoreAvailable<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>loading<span class="token punctuation">,</span> setLoading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>error<span class="token punctuation">,</span> setError<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 명확한 역할 분리된 내부 함수들</span>
  <span class="token keyword">const</span> <span class="token function-variable function">start</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setError</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">onError</span> <span class="token operator">=</span> <span class="token punctuation">(</span>err<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setError</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">end</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> append <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span>newProducts<span class="token operator">:</span> Product<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> newCursor<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span> hasMore<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setProducts</span><span class="token punctuation">(</span><span class="token punctuation">(</span>prev<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> existingIds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>prev<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> filtered <span class="token operator">=</span> newProducts<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
          <span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>existingIds<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span>prev<span class="token punctuation">,</span> <span class="token operator">...</span>filtered<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setCursor</span><span class="token punctuation">(</span>newCursor<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setMoreAvailable</span><span class="token punctuation">(</span>hasMore <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token operator">!</span>newProducts<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> fetchNext <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span>
      <span class="token function-variable function">request</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>QueryObserverResult<span class="token operator">&lt;</span>ThemeProductResponse<span class="token punctuation">,</span> Error<span class="token operator">&gt;&gt;</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>moreAvailable <span class="token operator">||</span> loading<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> data <span class="token operator">=</span> result<span class="token punctuation">.</span>data <span class="token keyword">as</span> ThemeProductResponse<span class="token punctuation">;</span>
          <span class="token function">append</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>list<span class="token punctuation">,</span> data<span class="token punctuation">.</span>cursor<span class="token punctuation">,</span> data<span class="token punctuation">.</span>hasMoreList<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>onError<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span>end<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>append<span class="token punctuation">,</span> loading<span class="token punctuation">,</span> moreAvailable<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 초기 데이터 설정</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>initData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">append</span><span class="token punctuation">(</span>initData<span class="token punctuation">.</span>list<span class="token punctuation">,</span> initData<span class="token punctuation">.</span>cursor <span class="token operator">??</span> <span class="token keyword">null</span><span class="token punctuation">,</span> initData<span class="token punctuation">.</span>hasMoreList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>initData<span class="token punctuation">,</span> append<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    data<span class="token operator">:</span> products<span class="token punctuation">,</span>
    cursor<span class="token punctuation">,</span>
    moreAvailable<span class="token punctuation">,</span>
    loading<span class="token punctuation">,</span>
    error<span class="token punctuation">,</span>
    fetchNext<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="step-2-level-2-조합-훅들-level-1-훅들의-조합" tabindex="-1"><a class="header-anchor" href="#step-2-level-2-조합-훅들-level-1-훅들의-조합" aria-hidden="true">#</a> Step 2) Level 2 - 조합 훅들 (Level 1 훅들의 조합)</h3><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token comment">// 3. Level 2 훅들을 조합하여 완전한 무한 스크롤 기능 제공</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useThemeInfiniteScroll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  themeId<span class="token punctuation">,</span>
  initialCursor <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  threshold <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token operator">:</span> ThemeInfiniteScrollOptions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> observerRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>HTMLDivElement <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Level 2 훅들을 조합</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> initialData <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useInitThemeData</span><span class="token punctuation">(</span>themeId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> theme <span class="token operator">=</span> <span class="token function">useThemeData</span><span class="token punctuation">(</span>initialData<span class="token punctuation">,</span> initialCursor<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> nextTheme <span class="token operator">=</span> <span class="token function">useInitNextThemeData</span><span class="token punctuation">(</span>themeId<span class="token punctuation">,</span> theme<span class="token punctuation">.</span>cursor<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// 각 훅의 기능을 연결</span>
  <span class="token keyword">const</span> fetchNextTheme <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> theme<span class="token punctuation">.</span><span class="token function">fetchNext</span><span class="token punctuation">(</span>nextTheme<span class="token punctuation">.</span>refetch<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>nextTheme<span class="token punctuation">.</span>refetch<span class="token punctuation">,</span> theme<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Level 1 훅과 연결</span>
  <span class="token function">useIntersectionObserver</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    targetRef<span class="token operator">:</span> observerRef<span class="token punctuation">,</span>
    onIntersect<span class="token operator">:</span> fetchNextTheme<span class="token punctuation">,</span>
    enabled<span class="token operator">:</span> theme<span class="token punctuation">.</span>moreAvailable <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>theme<span class="token punctuation">.</span>loading <span class="token operator">&amp;&amp;</span> theme<span class="token punctuation">.</span>data<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">,</span>
    threshold<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>theme<span class="token punctuation">,</span>
    loading<span class="token operator">:</span> theme<span class="token punctuation">.</span>loading <span class="token operator">??</span> nextTheme<span class="token punctuation">.</span>isLoading<span class="token punctuation">,</span>
    error<span class="token operator">:</span> theme<span class="token punctuation">.</span>error <span class="token operator">??</span> nextTheme<span class="token punctuation">.</span>error<span class="token punctuation">,</span>
    observerRef<span class="token punctuation">,</span>
    fetchNext<span class="token operator">:</span> fetchNextTheme<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><img src="https://www.plantuml.com/plantuml/svg/VP6nRi8m48PtFyNXp0nWgKE72YGMf0g4mbwPy8TQCYQodL1KTUihz04OaJgq0o-5u1r862f72Htl_azttza3vwNr-LgpZd_56fHfgGnZ5ecNPgL1_1a5DFKuIKS6snTTrJsAy92ADALtHaG1dZkCZOTrPKjjp7JXO0jOtiJYt6Km3iDCpNBO7ITgGdyX-sYnwjUj-XGbIUbrnqhvUNNZI7h9s_C9tlvbWgnDHzHr14KBiPJjEhTHOvEgSYtYn6wqlWqDdhZRVGflUoH-EdwVFtyv2xerI5JGUVzp-JfmnWOmo_9hhm00" alt="uml diagram"><div class="custom-container tip"><p class="custom-container-title">정리하기</p><ol><li><p>명확한 추상화 레벨 분리</p><ul><li><code>Level 1:</code> useIntersectionObserver, useSuspenseApiQuery, useApiQuery</li><li><code>Level 2:</code> useInitThemeData, useInitNextThemeData, useThemeData</li><li><code>Level 3:</code> useThemeInfiniteScroll (조합을 통한 완전한 기능)</li></ul></li><li><p>단일 책임 원칙 준수</p><ul><li><code>useInitThemeData</code>: 초기 데이터 fetching만</li><li><code>useInitNextThemeData</code>: 다음 페이지 쿼리만</li><li><code>useThemeData</code>: 데이터 상태 관리만</li><li><code>useThemeInfiniteScroll</code>: 조합을 통한 연결만</li></ul></li><li><p>조합 가능성과 재사용성</p><ul><li><code>useThemeData</code>는 다른 데이터 타입에도 재사용 가능</li><li>각 훅을 독립적으로 테스트 가능</li><li>필요에 따라 일부 훅만 사용 가능</li></ul></li><li><p>가독성 향상</p><ul><li>AS-IS: &quot;안녕하세요ㅈㅓㄴㅡㄴㅎㅘㅇ준일ㅇㅣㅂ니다&quot;</li><li>TO-BE: &quot;안녕하세요. 저는 개발자입니다.&quot;</li></ul></li></ol></div><h2 id="_4-추상화-정렬의-핵심-원칙" tabindex="-1"><a class="header-anchor" href="#_4-추상화-정렬의-핵심-원칙" aria-hidden="true">#</a> 4. 추상화 정렬의 핵심 원칙</h2><h3 id="_1-같은-레벨끼리만-조합하자" tabindex="-1"><a class="header-anchor" href="#_1-같은-레벨끼리만-조합하자" aria-hidden="true">#</a> (1) 같은 레벨끼리만 조합하자</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>✅ 올바른 조합:
useInitThemeData + useThemeData + useInitNextThemeData = useThemeInfiniteScroll

❌ 잘못된 조합 (기존):
useState + useSuspenseApiQuery + 복잡한 로직 + useIntersectionObserver = ???
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-각-훅의-명확한-단일-책임" tabindex="-1"><a class="header-anchor" href="#_2-각-훅의-명확한-단일-책임" aria-hidden="true">#</a> (2) 각 훅의 명확한 단일 책임</h3><ul><li><strong>useInitThemeData</strong>: &quot;초기 데이터만 가져온다&quot;</li><li><strong>useThemeData</strong>: &quot;테마 데이터 상태만 관리한다&quot;</li><li><strong>useInitNextThemeData</strong>: &quot;다음 페이지 쿼리만 준비한다&quot;</li><li><strong>useThemeInfiniteScroll</strong>: &quot;위 훅들을 조합해서 완전한 기능을 제공한다&quot;</li></ul><h3 id="_3-조합을-통한-확장성" tabindex="-1"><a class="header-anchor" href="#_3-조합을-통한-확장성" aria-hidden="true">#</a> (3) 조합을 통한 확장성</h3><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token comment">// 다른 방식으로도 조합 가능</span>
<span class="token keyword">const</span> <span class="token function-variable function">MyComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> initialData <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useInitThemeData</span><span class="token punctuation">(</span>themeId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> theme <span class="token operator">=</span> <span class="token function">useThemeData</span><span class="token punctuation">(</span>initialData<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 다른 조건으로 사용</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleButtonClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    theme<span class="token punctuation">.</span><span class="token function">fetchNext</span><span class="token punctuation">(</span>someOtherRefetchFunction<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">...</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="마무리" tabindex="-1"><a class="header-anchor" href="#마무리" aria-hidden="true">#</a> 마무리</h2><p>좋은 코드는 한글을 읽는 것처럼 자연스럽게 읽혀야 한다. <strong>같은 추상화 레벨의 훅들이 모여 더 높은 레벨의 기능을 구성</strong>할 때, 코드의 의도가 명확해지고 유지보수가 쉬워진다. 각 훅이 명확한 단일 책임을 가지고, 이들이 조합되어 완전한 기능을 만드는 구조.</p><p>이것이 바로 <strong>추상화를 정렬하는 방법</strong>이라고 생각한다.</p><p>훅(혹은 함수)는 레고 블록과 비슷하다. 각각이 명확한 기능을 가지고, 이들을 조합해서 더 복잡한 기능을 만들어야 한다. 하나의 블록에 모든 기능을 우겨넣지 말고, 작은 블록들을 조합해서 아름다운 구조물을 만들 수 있다.</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><!----></footer><!----><!--[--><!--[--><div></div><!----><!--]--><!--]--></main><!--]--></div><footer class="siteFooter"><div class="container"><p class="siteFooterCopyright"> Copyright © 2025 All Right <em>개발자 황준일</em></p><p class="siteFooterContact"> junil.h@kakao.com . +82-10-5764-4483 . <a href="https://github.com/junilhwang" target="_blank">GitHub</a> . <a href="https://github.com/junilhwang/TIL/" target="_blank">Repository</a> . <a href="https://junilhwang.github.io/TIL/rss.xml" target="_blank">RSS</a></p></div></footer><!--]--><!----><!--]--></div>
    <script type="module" src="/TIL/assets/app.045bf462.js" defer></script>
  </body>
</html>
